
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Reducing WFM data &#8212; ess  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Modules" href="../../utilities/utilities.html" />
    <link rel="prev" title="Introduction to Wavelength Frame Multiplication" href="introduction-to-wfm.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../getting-started/installation.html">
   Installation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Instruments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/amor/amor.html">
   Amor
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/amor/amor_reduction.html">
     Divergent data reduction for Amor
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../instruments/amor/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.beamline.html">
       ess.amor.beamline
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.beamline.instrument_view_components.html">
         ess.amor.beamline.instrument_view_components
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.beamline.make_beamline.html">
         ess.amor.beamline.make_beamline
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.calibrations.html">
       ess.amor.calibrations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.calibrations.calibration_factor.html">
         ess.amor.calibrations.calibration_factor
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.calibrations.supermirror_calibration.html">
         ess.amor.calibrations.supermirror_calibration
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.conversions.html">
       ess.amor.conversions
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.conversions.incident_beam.html">
         ess.amor.conversions.incident_beam
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.conversions.specular_reflection.html">
         ess.amor.conversions.specular_reflection
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.normalize.html">
       ess.amor.normalize
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.normalize.normalize_by_supermirror.html">
         ess.amor.normalize.normalize_by_supermirror
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.orso.html">
       ess.amor.orso
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.orso.make_orso.html">
         ess.amor.orso.make_orso
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.resolution.html">
       ess.amor.resolution
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.angular_resolution.html">
         ess.amor.resolution.angular_resolution
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.sample_size_resolution.html">
         ess.amor.resolution.sample_size_resolution
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.sigma_Q.html">
         ess.amor.resolution.sigma_Q
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.wavelength_resolution.html">
         ess.amor.resolution.wavelength_resolution
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.tools.html">
       ess.amor.tools
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.fwhm_to_std.html">
         ess.amor.tools.fwhm_to_std
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.linlogspace.html">
         ess.amor.tools.linlogspace
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.std_to_fwhm.html">
         ess.amor.tools.std_to_fwhm
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.amor.instrument_view.instrument_view.html">
       ess.amor.instrument_view.instrument_view
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.amor.load.load.html">
       ess.amor.load.load
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/dream/dream.html">
   DREAM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/dream/dream-instrument-view.html">
     DREAM instrument view
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/loki/loki.html">
   Loki
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/loki/sans2d_to_I_of_Q.html">
     SANS2D: I(Q) workflow for a single run (sample)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/loki/sans2d_reduction.html">
     SANS2D: I(Q) for sample and background
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/external/external.html">
   External Instruments
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/external/offspec/offspec_reduction.html">
     Collimated data reduction for OFFSPEC
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../instruments/external/powgen/powgen.html">
     POWGEN
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../instruments/external/powgen/powgen_reduction.html">
       Data reduction for POWGEN
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../instruments/external/powgen/reference.html">
       Reference
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.external.powgen.beamline.html">
         ess.external.powgen.beamline
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Techniques
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../diffraction/diffraction.html">
   Diffraction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../diffraction/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.normalize_by_monitor.html">
       ess.diffraction.normalize_by_monitor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.normalize_by_vanadium.html">
       ess.diffraction.normalize_by_vanadium
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.lowpass.html">
       ess.diffraction.lowpass
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../diffraction/powder.html">
       Powder
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
      <label for="toctree-checkbox-17">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.conversions.dspacing_from_diff_calibration.html">
         ess.diffraction.powder.conversions.dspacing_from_diff_calibration
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.to_dspacing_with_calibration.html">
         ess.diffraction.powder.to_dspacing_with_calibration
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.merge_calibration.html">
         ess.diffraction.powder.merge_calibration
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../reflectometry/reflectometry.html">
   Reflectometry
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../reflectometry/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.conversions.specular_reflection.html">
       ess.reflectometry.conversions.specular_reflection
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.footprint_correction.html">
       ess.reflectometry.corrections.footprint_correction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.normalize_by_counts.html">
       ess.reflectometry.corrections.normalize_by_counts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.beam_on_sample.html">
       ess.reflectometry.corrections.beam_on_sample
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.io.save_ort.html">
       ess.reflectometry.io.save_ort
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../sans/sans.html">
   SANS
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../sans/sans-beam-center-finder.html">
     Beam center finder
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../sans/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../sans/i_of_q.html">
       I(Q) reduction workflow
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
      <label for="toctree-checkbox-22">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.to_I_of_Q.html">
         ess.sans.i_of_q.to_I_of_Q
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.convert_to_q_and_merge_spectra.html">
         ess.sans.i_of_q.convert_to_q_and_merge_spectra
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.preprocess_monitor_data.html">
         ess.sans.i_of_q.preprocess_monitor_data
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.resample_direct_beam.html">
         ess.sans.i_of_q.resample_direct_beam
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.beam_center.html">
       ess.sans.beam_center_finder.beam_center
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.center_of_mass.html">
       ess.sans.beam_center_finder.center_of_mass
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.cost.html">
       ess.sans.beam_center_finder.cost
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.iofq_in_quadrants.html">
       ess.sans.beam_center_finder.iofq_in_quadrants
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.minimize.html">
       ess.sans.beam_center_finder.minimize
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.conversions.sans_elastic.html">
       ess.sans.conversions.sans_elastic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.conversions.sans_monitor.html">
       ess.sans.conversions.sans_monitor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.solid_angle_of_rectangular_pixels.html">
       ess.sans.normalization.solid_angle_of_rectangular_pixels
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.transmission_fraction.html">
       ess.sans.normalization.transmission_fraction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.iofq_denominator.html">
       ess.sans.normalization.iofq_denominator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.normalize.html">
       ess.sans.normalization.normalize
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.common.gravity_vector.html">
       ess.sans.common.gravity_vector
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.common.mask_range.html">
       ess.sans.common.mask_range
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="wfm.html">
   Wavelength frame multiplication
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
  <label for="toctree-checkbox-23">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="introduction-to-wfm.html">
     Introduction to Wavelength Frame Multiplication
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Reducing WFM data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Utilities
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../utilities/utilities.html">
   Modules
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
  <label for="toctree-checkbox-24">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.logging.html">
     ess.logging
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
    <label for="toctree-checkbox-25">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.configure.html">
       ess.logging.configure
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.configure_workflow.html">
       ess.logging.configure_workflow
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.default_loggers_to_configure.html">
       ess.logging.default_loggers_to_configure
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.get_logger.html">
       ess.logging.get_logger
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.greet.html">
       ess.logging.greet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.log_call.html">
       ess.logging.log_call
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.Formatter.html">
       ess.logging.Formatter
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.masking.html">
     ess.masking
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
    <label for="toctree-checkbox-26">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.masking.save_detector_masks.html">
       ess.masking.save_detector_masks
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.uncertainty.html">
     ess.uncertainty
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/>
    <label for="toctree-checkbox-27">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.uncertainty.variance_normalized_signal_over_monitor.html">
       ess.uncertainty.variance_normalized_signal_over_monitor
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../developer/style-guide.html">
   Style guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../developer/getting-started.html">
   Getting Started
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/release-notes.html">
   Release Notes
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        

















<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="None">
<span class="headerbtn__text-container">Related projects</span>
<i class="fa fa-caret-down"></i>
  </button>
<div class="menu-dropdown__content" style="transform:translateX(0%)">
    <ul>
      <li>
        <a href="https://scipp.github.io"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scipp</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/plopp"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">plopp</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/scippnexus"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scippnexus</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/scippneutron"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scippneutron</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">ess</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="None">
<span class="headerbtn__text-container">24.1.1.dev5+g8409fb3 (latest)</span>
<i class="fa fa-caret-down"></i>
  </button>
<div class="menu-dropdown__content" style="transform:translateX(0%)">
    <ul>
      <li>
        <a href="https://scipp.github.io/ess"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">24.1 (latest)</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.11"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.11</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.10"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.10</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.4"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.4</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.1"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.1</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.9"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.9</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.8"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.8</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.7"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.7</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.6"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.6</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.5"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.5</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.4"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.4</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.3"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.3</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.2"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.2</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.1"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.1</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">

<i class="fab fa-github"></i>
  </button>
<div class="menu-dropdown__content" >
    <ul>
      <li>
        <a href="https://github.com/scipp/ess"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/scipp/ess/issues/new?title=Issue%20on%20page%20%2Ftechniques/wfm/reducing-wfm-data.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/scipp/ess/edit/main/docs/techniques/wfm/reducing-wfm-data.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">

<i class="fas fa-download"></i>
  </button>
<div class="menu-dropdown__content" >
    <ul>
      <li>
        <a href="../../_sources/techniques/wfm/reducing-wfm-data.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Create-beamline-components">
   Create beamline components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Generate-some-fake-data">
   Generate some fake data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Visualize-the-beamline's-chopper-cascade">
   Visualize the beamline’s chopper cascade
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Discard-neutrons-that-do-not-make-it-through-the-chopper-windows">
   Discard neutrons that do not make it through the chopper windows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Create-a-realistic-Dataset">
   Create a realistic Dataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Stitch-the-frames">
   Stitch the frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Convert-to-wavelength">
   Convert to wavelength
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Normalization">
   Normalization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Comparing-to-the-raw-wavelengths">
   Comparing to the raw wavelengths
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Without-WFM-choppers">
   Without WFM choppers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Working-in-event-mode">
   Working in event mode
  </a>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Reducing WFM data</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Create-beamline-components">
   Create beamline components
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Generate-some-fake-data">
   Generate some fake data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Visualize-the-beamline's-chopper-cascade">
   Visualize the beamline’s chopper cascade
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Discard-neutrons-that-do-not-make-it-through-the-chopper-windows">
   Discard neutrons that do not make it through the chopper windows
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Create-a-realistic-Dataset">
   Create a realistic Dataset
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Stitch-the-frames">
   Stitch the frames
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Convert-to-wavelength">
   Convert to wavelength
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Normalization">
   Normalization
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Comparing-to-the-raw-wavelengths">
   Comparing to the raw wavelengths
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Without-WFM-choppers">
   Without WFM choppers
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Working-in-event-mode">
   Working in event mode
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="Reducing-WFM-data">
<h1>Reducing WFM data<a class="headerlink" href="#Reducing-WFM-data" title="Permalink to this headline">#</a></h1>
<p>This notebook aims to illustrate how to work with the wavelength frame multiplication submodule <code class="docutils literal notranslate"><span class="pre">wfm</span></code>.</p>
<p>We will create a beamline that resembles the ODIN instrument beamline, generate some fake neutron data, and then show how to convert the neutron arrival times at the detector to neutron time-of-flight, from which a wavelength can then be computed (or process also commonly known as ‘stitching’).</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">scipp</span> <span class="k">as</span> <span class="nn">sc</span>
<span class="kn">from</span> <span class="nn">scipp</span> <span class="kn">import</span> <span class="n">constants</span>
<span class="kn">import</span> <span class="nn">scippneutron</span> <span class="k">as</span> <span class="nn">scn</span>
<span class="kn">import</span> <span class="nn">ess.wfm</span> <span class="k">as</span> <span class="nn">wfm</span>
<span class="kn">import</span> <span class="nn">ess.choppers</span> <span class="k">as</span> <span class="nn">ch</span>

<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Fixed for reproducibility</span>
</pre></div>
</div>
</div>
<section id="Create-beamline-components">
<h2>Create beamline components<a class="headerlink" href="#Create-beamline-components" title="Permalink to this headline">#</a></h2>
<p>We first create all the components necessary to a beamline to run in WFM mode (see <a class="reference internal" href="introduction-to-wfm.html"><span class="doc">Introduction to WFM</span></a> for the meanings of the different symbols). The beamline will contain</p>
<ul class="simple">
<li><p>a neutron source, located at the origin (<span class="math notranslate nohighlight">\(x = y = z = 0\)</span>)</p></li>
<li><p>a pulse with a defined length (<span class="math notranslate nohighlight">\(2860 ~\mu s\)</span>) and <span class="math notranslate nohighlight">\(t_0\)</span> (<span class="math notranslate nohighlight">\(130 ~\mu s\)</span>)</p></li>
<li><p>a single pixel detector, located at <span class="math notranslate nohighlight">\(z = 60\)</span> m</p></li>
<li><p>two WFM choppers, located at <span class="math notranslate nohighlight">\(z = 6.775\)</span> m and <span class="math notranslate nohighlight">\(z = 7.225\)</span> m, each with 6 frame windows/openings</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">wfm</span></code> module provides a helper function to quickly create such a beamline. It returns a <code class="docutils literal notranslate"><span class="pre">dict</span></code> of coordinates, that can then be subsequently added to a data container.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">coords</span> <span class="o">=</span> <span class="n">wfm</span><span class="o">.</span><span class="n">make_fake_beamline</span><span class="p">(</span><span class="n">nframes</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">coords</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
{&#39;chopper_wfm_1&#39;: &lt;scipp.Variable&gt; ()   PyObject        &lt;no unit&gt;  DataGroup(sizes={&#39;frame&#39;: 6}, keys=[&#39;frequency&#39;, &#39;position&#39;, &#39;phase&#39;, &#39;cutout_angles_center&#39;, &#39;cutout_angles_width&#39;, &#39;kind&#39;]),
 &#39;chopper_wfm_2&#39;: &lt;scipp.Variable&gt; ()   PyObject        &lt;no unit&gt;  DataGroup(sizes={&#39;frame&#39;: 6}, keys=[&#39;frequency&#39;, &#39;position&#39;, &#39;phase&#39;, &#39;cutout_angles_center&#39;, &#39;cutout_angles_width&#39;, &#39;kind&#39;]),
 &#39;position&#39;: &lt;scipp.Variable&gt; ()    vector3              [m]  (0, 0, 60),
 &#39;source_pulse_length&#39;: &lt;scipp.Variable&gt; ()    float64            [µs]  2860,
 &#39;source_pulse_t_0&#39;: &lt;scipp.Variable&gt; ()    float64            [µs]  130,
 &#39;source_position&#39;: &lt;scipp.Variable&gt; ()    vector3              [m]  (0, 0, 0)}
</pre></div></div>
</div>
</section>
<section id="Generate-some-fake-data">
<h2>Generate some fake data<a class="headerlink" href="#Generate-some-fake-data" title="Permalink to this headline">#</a></h2>
<p>Next, we will generate some fake imaging data (no scattering will be considered), that is supposed to mimic a spectrum with a Bragg edge located at <span class="math notranslate nohighlight">\(4\unicode{x212B}\)</span>. We start with describing a function which will act as our underlying distribution</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
<span class="n">a</span> <span class="o">=</span> <span class="mf">20.0</span>
<span class="n">b</span> <span class="o">=</span> <span class="mf">4.0</span>
<span class="n">y1</span> <span class="o">=</span> <span class="mf">0.7</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span><span class="p">))</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="mf">1.4</span> <span class="o">-</span> <span class="mf">0.2</span> <span class="o">*</span> <span class="n">x</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">y2</span>
<span class="n">fig1</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wavelength [angstroms]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Text(0.5, 0, &#39;Wavelength [angstroms]&#39;)
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_5_1.png" src="../../_images/techniques_wfm_reducing-wfm-data_5_1.png" />
</div>
</div>
<p>We then proceed to generate two sets of 1,000,000 events: - one for the <code class="docutils literal notranslate"><span class="pre">sample</span></code> using the distribution defined above - and one for the <code class="docutils literal notranslate"><span class="pre">vanadium</span></code> which will be just a flat random distribution</p>
<p>For the events in both <code class="docutils literal notranslate"><span class="pre">sample</span></code> and <code class="docutils literal notranslate"><span class="pre">vanadium</span></code>, we define a wavelength for the neutrons as well as a birth time, which will be a random time between the pulse <span class="math notranslate nohighlight">\(t_0\)</span> and the end of the usable pulse <span class="math notranslate nohighlight">\(t_0\)</span> + pulse_length.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nevents</span> <span class="o">=</span> <span class="mi">1_000_000</span>
<span class="n">events</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;sample&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;wavelengths&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">nevents</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">y</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;angstrom&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="s2">&quot;birth_times&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents</span><span class="p">)</span> <span class="o">*</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_length&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_t_0&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;vanadium&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;wavelengths&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents</span><span class="p">)</span> <span class="o">*</span> <span class="mf">9.0</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;angstrom&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="s2">&quot;birth_times&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents</span><span class="p">)</span> <span class="o">*</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_length&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_t_0&quot;</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>We can then take a quick look at our fake data by histogramming the events</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Histogram and plot the event data</span>
<span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mi">129</span><span class="p">)</span>
<span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Wavelength [angstroms]&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Counts&quot;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.legend.Legend at 0x7f54de2ebb20&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_9_1.png" src="../../_images/techniques_wfm_reducing-wfm-data_9_1.png" />
</div>
</div>
<p>We can also verify that the birth times fall within the expected range:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;birth_times&quot;</span><span class="p">]))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;birth_times&quot;</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
sample
&lt;scipp.Variable&gt; ()    float64            [µs]  130.008
&lt;scipp.Variable&gt; ()    float64            [µs]  2990
vanadium
&lt;scipp.Variable&gt; ()    float64            [µs]  130.004
&lt;scipp.Variable&gt; ()    float64            [µs]  2990
</pre></div></div>
</div>
<p>We can then compute the arrival times of the events at the detector pixel</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The ratio of neutron mass to the Planck constant</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">to_unit</span><span class="p">(</span><span class="n">constants</span><span class="o">.</span><span class="n">m_n</span> <span class="o">/</span> <span class="n">constants</span><span class="o">.</span><span class="n">h</span><span class="p">,</span> <span class="s1">&#39;us/m/angstrom&#39;</span><span class="p">)</span>
<span class="c1"># The distance between the source and the detector</span>
<span class="n">dz</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">coords</span><span class="p">[</span><span class="s1">&#39;source_position&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">dz</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;birth_times&quot;</span><span class="p">]</span>
<span class="n">events</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Variable (7.63 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-standalone-var-name'><span>(event: 1000000)</span></div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>6.326e+04, 9.431e+04, ..., 2.788e+04, 5.809e+04</div></span></div><input id='attrs-c55d42a6-9eab-4e4d-a63e-8b32d5e6ca81' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-c55d42a6-9eab-4e4d-a63e-8b32d5e6ca81' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e659f68a-5c3f-4285-acab-8a776ed46b0e' class='sc-var-data-in' type='checkbox'><label for='data-e659f68a-5c3f-4285-acab-8a776ed46b0e' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([63257.61773626, 94307.95311489, 16899.66119625, ...,
       70065.41396431, 27877.08441761, 58091.769017  ])</pre></li></ul></li></ul></div></div></div>
</div>
</section>
<section id="Visualize-the-beamline's-chopper-cascade">
<h2>Visualize the beamline’s chopper cascade<a class="headerlink" href="#Visualize-the-beamline's-chopper-cascade" title="Permalink to this headline">#</a></h2>
<p>We first attach the beamline geometry to a Dataset</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (1.88 KB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-7ad597ca-f09a-4770-bc03-bd2db20aca37' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-7ad597ca-f09a-4770-bc03-bd2db20aca37' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-d6c55e7d-6cbb-4863-a038-f2a7c77ff8a2' class='sc-section-summary-in' type='checkbox'  checked><label for='section-d6c55e7d-6cbb-4863-a038-f2a7c77ff8a2' class='sc-section-summary' >Coordinates: <span>(6)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-331233c0-544d-4e8f-880b-55a9244e0ff8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-331233c0-544d-4e8f-880b-55a9244e0ff8' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-60ab77ce-ebaf-4b08-b3c6-51d789ab5842' class='sc-var-data-in' type='checkbox'><label for='data-60ab77ce-ebaf-4b08-b3c6-51d789ab5842' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-081ecaa6-0fef-4660-8efb-00eeceafc5b8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-081ecaa6-0fef-4660-8efb-00eeceafc5b8' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d00670e4-8cf4-4a00-acd1-29c3bde87571' class='sc-var-data-in' type='checkbox'><label for='data-d00670e4-8cf4-4a00-acd1-29c3bde87571' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-689995d0-93e2-4c5b-94f0-a07dd21d027a' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-689995d0-93e2-4c5b-94f0-a07dd21d027a' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36cfc141-78e4-47d7-a51f-32a8e2b6dda1' class='sc-var-data-in' type='checkbox'><label for='data-36cfc141-78e4-47d7-a51f-32a8e2b6dda1' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 0.]</div></span></div><input id='attrs-13ecac4f-3489-46ff-b118-e5add6598cc2' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-13ecac4f-3489-46ff-b118-e5add6598cc2' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e6bc6342-3f37-42af-9464-5a20bb8dc5e5' class='sc-var-data-in' type='checkbox'><label for='data-e6bc6342-3f37-42af-9464-5a20bb8dc5e5' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 0.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-21099577-3bef-4981-a1e9-18f9fe1ebebf' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-21099577-3bef-4981-a1e9-18f9fe1ebebf' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6e091e7a-04e5-4038-bf86-ee4d3c1bd991' class='sc-var-data-in' type='checkbox'><label for='data-6e091e7a-04e5-4038-bf86-ee4d3c1bd991' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-8d0f08fa-39b6-4582-82b1-bc5a322135f6' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-8d0f08fa-39b6-4582-82b1-bc5a322135f6' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4a6bfde3-70d4-4010-b3ce-ab2a92c14024' class='sc-var-data-in' type='checkbox'><label for='data-4a6bfde3-70d4-4010-b3ce-ab2a92c14024' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-e6f666e0-9081-4dce-8ee7-c8710b34cb20' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-e6f666e0-9081-4dce-8ee7-c8710b34cb20' class='sc-section-summary'  title='Expand/collapse section'>Data: <span>(0)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'></ul></div></li></ul></div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">wfm.plot</span></code> submodule provides a useful tool to visualize the chopper cascade as a time-distance diagram. This is achieved by calling</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="n">wfm</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">time_distance_diagram</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_17_0.png" src="../../_images/techniques_wfm_reducing-wfm-data_17_0.png" />
</div>
</div>
<p>This shows the 6 frames, generated by the WFM choppers, as well as their predicted time boundaries at the position of the detector.</p>
<p>Each frame has a time window during which neutrons are allowed to pass through, as well as minimum and maximum allowed wavelengths.</p>
<p>This information is obtained from the beamline geometry by calling</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">frames</span> <span class="o">=</span> <span class="n">wfm</span><span class="o">.</span><span class="n">get_frames</span><span class="p">(</span><span class="n">ds</span><span class="p">)</span>
<span class="n">frames</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><style id="datagroup-style-sheet">.dg-root{white-space:normal;font-size:14px;min-width:300px;max-width:1200px;}.dg-root *{box-sizing:border-box;}.sc-header > label,.sc-header > label > div,.sc-header > label > div > ul{display:inline;margin-bottom:0;}.dg-header-in{display:none;}.dg-header-in + .sc-header > label:before{display:inline-block;font-size:11px;text-align:left;content:'►';}.dg-header-in:checked + .sc-header > label:before{content:'▼';}.dg-header-in ~ .dg-detail-box{display:none;}.dg-header-in:checked ~ .dg-detail-box{display:grid;}.dg-detail-box{margin-top:5px;margin-bottom:5px;column-gap:0 !important;display:grid;grid-template-columns:max-content max-content max-content max-content max-content max-content max-content;grid-template-areas:"name        parent      object-type shape       dtype       unit        preview";}.dg-detail-box *{margin-top:0;margin-bottom:0;}.dg-detail-list{display:contents;}.dg-detail-item{display:contents;list-style-type:none;}.dg-detail-item-in{display:none;}.dg-detail-item-in + .dg-detail-name > label:before{display:inline-block;font-size:14px;text-align:left;content:'►';}.dg-detail-item-in:checked + .dg-detail-name > label:before{content:'▼';}.dg-detail-item div,.dg-detail-item span,.dg-detail-item label{word-break:break-all;min-width:1em;max-width:20em;width:100%;}.dg-detail-item > div{display:contents;}.dg-detail-item > div > div > div{width:100%;}.dg-detail-item:hover > div > div{background-color:var(--sc-background-color2) !important;}.dg-detail-item > div span{padding-left:10px;padding-right:10px;}.dg-detail-item > div > div:first-of-type{grid-column-start:1;}.dg-detail-item-subsection{display:none;}.dg-detail-item-in{margin:0;}.dg-detail-item-in:checked ~ .dg-detail-item-subsection{display:contents;}.dg-detail-item .dg-detail-name{grid-area:"name";min-width:5em;}.dg-detail-name{padding-left:calc(var(--depth)*2em);}.dg-detail-name > label{padding-left:8px;}.dg-detail-name > label > span{padding-left:0.1em;}.dg-detail-item .dg-detail-parent{grid-area:"parent";text-align:right;}.dg-detail-item .dg-detail-objtype{grid-area:"objtype";text-align:left;}.dg-detail-item .dg-detail-shape{max-width:30em;grid-area:"shape";text-align:left;}.sc-header .dg-detail-shape{margin-left:1em;text-align:left;}.dg-detail-item .dg-detail-dtype{grid-area:"dtype";text-align:left;}.dg-detail-item .dg-detail-unit{grid-area:"unit";text-align:center;}.dg-detail-item .dg-detail-preview{grid-area:"preview";min-width:15em;max-width:100em !important;text-align:left;}.dg-detail-preview .sc-preview span,.dg-detail-shape span{padding:0 !important;}</style><div class='sc-root dg-root'><input class='dg-header-in' id='datagroup-view-23f31333-ae92-4e2d-9cdb-6af0241a6694' type='checkbox' checked><div class='sc-header'><label for=datagroup-view-23f31333-ae92-4e2d-9cdb-6af0241a6694 title='Expand/collapse'><div class='sc-obj-type'>scipp.DataGroup </div><div class='dg-detail-shape'>(frame: 6)</div></label></div><div class='dg-detail-box'><ul class='dg-detail-list'><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>time_correction</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>µs</span></div><div class='dg-detail-preview'><span class='sc-preview'>4702.574, 7277.777, ..., 1.408e+04, 1.607e+04</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>time_min</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>µs</span></div><div class='dg-detail-preview'><span class='sc-preview'>1.804e+04, 4.068e+04, ..., 1.005e+05, 1.180e+05</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>delta_time_min</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>µs</span></div><div class='dg-detail-preview'><span class='sc-preview'>113.750, 284.797, ..., 736.629, 868.881</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>time_max</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>µs</span></div><div class='dg-detail-preview'><span class='sc-preview'>3.839e+04, 5.993e+04, ..., 1.168e+05, 1.335e+05</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>delta_time_max</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>µs</span></div><div class='dg-detail-preview'><span class='sc-preview'>284.797, 445.190, ..., 868.881, 992.895</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>wavelength_min</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>Å</span></div><div class='dg-detail-preview'><span class='sc-preview'>1.000, 2.504, ..., 6.476, 7.638</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>wavelength_max</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>Å</span></div><div class='dg-detail-preview'><span class='sc-preview'>2.504, 3.914, ..., 7.638, 8.729</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>delta_wavelength_min</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>Å</span></div><div class='dg-detail-preview'><span class='sc-preview'>0.008, 0.021, ..., 0.055, 0.065</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>delta_wavelength_max</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>(frame: 6)</div><div class='dg-detail-dtype'><span>float64</span></div><div class='dg-detail-unit'><span>Å</span></div><div class='dg-detail-preview'><span class='sc-preview'>0.021, 0.033, ..., 0.065, 0.074</span></div></div></li><li class='dg-detail-item'><div><div class='dg-detail-name' style='--depth: 0;'><span>wfm_chopper_mid_point</span></div><div class='dg-detail-parent'><span style='opacity: 0.5;'>scipp</span></div><div class='dg-detail-objtype'><span>Variable</span></div><div class='dg-detail-shape'>()</div><div class='dg-detail-dtype'><span>vector3</span></div><div class='dg-detail-unit'><span>m</span></div><div class='dg-detail-preview'><span class='sc-preview'>[0. 0. 7.]</span></div></div></li></ul></div></div></div></div>
</div>
</section>
<section id="Discard-neutrons-that-do-not-make-it-through-the-chopper-windows">
<h2>Discard neutrons that do not make it through the chopper windows<a class="headerlink" href="#Discard-neutrons-that-do-not-make-it-through-the-chopper-windows" title="Permalink to this headline">#</a></h2>
<p>Once we have the parameters of the 6 wavelength frames, we need to run through all our generated neutrons and filter out all the neutrons with invalid flight paths, i.e. the ones that do not make it through both chopper openings in a given frame.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_indices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">near_wfm_chopper</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s2">&quot;chopper_wfm_1&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<span class="n">far_wfm_chopper</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s2">&quot;chopper_wfm_2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span>
<span class="n">near_time_open</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">time_open</span><span class="p">(</span><span class="n">near_wfm_chopper</span><span class="p">)</span>
<span class="n">near_time_close</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">time_closed</span><span class="p">(</span><span class="n">near_wfm_chopper</span><span class="p">)</span>
<span class="n">far_time_open</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">time_open</span><span class="p">(</span><span class="n">far_wfm_chopper</span><span class="p">)</span>
<span class="n">far_time_close</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">time_closed</span><span class="p">(</span><span class="n">far_wfm_chopper</span><span class="p">)</span>

<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="c1"># Compute event arrival times at wfm choppers 1 and 2</span>
    <span class="n">slopes</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">alpha</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">])</span>
    <span class="n">intercepts</span> <span class="o">=</span> <span class="o">-</span><span class="n">slopes</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;birth_times&quot;</span><span class="p">]</span>
    <span class="n">times_at_wfm1</span> <span class="o">=</span> <span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">near_wfm_chopper</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">intercepts</span><span class="p">)</span> <span class="o">/</span> <span class="n">slopes</span>
    <span class="n">times_at_wfm2</span> <span class="o">=</span> <span class="p">(</span><span class="n">sc</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">far_wfm_chopper</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">])</span> <span class="o">-</span> <span class="n">intercepts</span><span class="p">)</span> <span class="o">/</span> <span class="n">slopes</span>
    <span class="c1"># Create a mask to see if neutrons go through one of the openings</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">dims</span><span class="o">=</span><span class="n">times_at_wfm1</span><span class="o">.</span><span class="n">dims</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="n">times_at_wfm1</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">frames</span><span class="p">[</span><span class="s2">&quot;time_min&quot;</span><span class="p">])):</span>
        <span class="n">mask</span> <span class="o">|=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">times_at_wfm1</span> <span class="o">&gt;=</span> <span class="n">near_time_open</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">times_at_wfm1</span> <span class="o">&lt;=</span> <span class="n">near_time_close</span><span class="p">[</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">frames</span><span class="p">[</span><span class="s2">&quot;wavelength_min&quot;</span><span class="p">][</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
            <span class="o">&amp;</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">frames</span><span class="p">[</span><span class="s2">&quot;wavelength_max&quot;</span><span class="p">][</span><span class="s2">&quot;frame&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">])</span>
        <span class="p">)</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_indices&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">values</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
<section id="Create-a-realistic-Dataset">
<h2>Create a realistic Dataset<a class="headerlink" href="#Create-a-realistic-Dataset" title="Permalink to this headline">#</a></h2>
<p>We now create a dataset that contains: - the beamline geometry - the time coordinate - the histogrammed events</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_indices&quot;</span><span class="p">]]</span>

<span class="n">tmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
<span class="n">tmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">tmax</span> <span class="o">-</span> <span class="n">tmin</span><span class="p">)</span>
<span class="n">time_coord</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="n">tmin</span> <span class="o">-</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">stop</span><span class="o">=</span><span class="n">tmax</span> <span class="o">+</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">num</span><span class="o">=</span><span class="mi">257</span><span class="p">,</span>
    <span class="n">unit</span><span class="o">=</span><span class="n">events</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Histogram the data</span>
<span class="n">histogrammed_data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span>
            <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">])],</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">counts</span><span class="p">,</span>
            <span class="n">with_variances</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">us</span>
            <span class="p">)</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="n">histogrammed_data</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time_coord</span><span class="p">)</span>

<span class="n">ds</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">histogrammed_data</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
<span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (13.71 KB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-778dd53d-6892-452e-ba03-5e91671091af' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-778dd53d-6892-452e-ba03-5e91671091af' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span class='sc-has-index'>time</span>: 256</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-ec895a87-9f56-44aa-8cea-4e0b6a830357' class='sc-section-summary-in' type='checkbox'  checked><label for='section-ec895a87-9f56-44aa-8cea-4e0b6a830357' class='sc-section-summary' >Coordinates: <span>(7)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-26dbc387-3616-4374-a7ef-dca9701bc91c' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-26dbc387-3616-4374-a7ef-dca9701bc91c' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-39c90a54-3b33-4a17-8666-cc5e0083ea49' class='sc-var-data-in' type='checkbox'><label for='data-39c90a54-3b33-4a17-8666-cc5e0083ea49' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-e31754f7-17e5-479b-99a1-b9f6d06c26d1' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-e31754f7-17e5-479b-99a1-b9f6d06c26d1' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-521e1d54-ae4f-4c47-9781-e631691d8af6' class='sc-var-data-in' type='checkbox'><label for='data-521e1d54-ae4f-4c47-9781-e631691d8af6' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-2b4c5d49-f59a-4688-908e-7d220b1c4ca3' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-2b4c5d49-f59a-4688-908e-7d220b1c4ca3' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-222204e6-eb56-442b-9bec-347c666fddfc' class='sc-var-data-in' type='checkbox'><label for='data-222204e6-eb56-442b-9bec-347c666fddfc' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 0.]</div></span></div><input id='attrs-4ed60166-3c6b-42b7-be31-ee1b88821c0f' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-4ed60166-3c6b-42b7-be31-ee1b88821c0f' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-94f15766-60ea-48f1-9997-98c33026730e' class='sc-var-data-in' type='checkbox'><label for='data-94f15766-60ea-48f1-9997-98c33026730e' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 0.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-3ae38de7-5ae3-4dcb-8d75-23b6710d8863' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-3ae38de7-5ae3-4dcb-8d75-23b6710d8863' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-518e40c4-24a4-47d3-a8ea-186e5d9d9d0f' class='sc-var-data-in' type='checkbox'><label for='data-518e40c4-24a4-47d3-a8ea-186e5d9d9d0f' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-22dfcde9-0b62-4e83-8119-b7d32d7602e2' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-22dfcde9-0b62-4e83-8119-b7d32d7602e2' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ccaf3b0f-a5b9-4170-bc30-0e7d6b90bae7' class='sc-var-data-in' type='checkbox'><label for='data-ccaf3b0f-a5b9-4170-bc30-0e7d6b90bae7' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>time</span></div><div class='sc-var-dims'>(time [bin-edge])</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>6358.679, 6900.323, ..., 1.445e+05, 1.450e+05</div></span></div><input id='attrs-2726dd6f-b13c-4b36-8d0c-2f5949f729de' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-2726dd6f-b13c-4b36-8d0c-2f5949f729de' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3e539e2f-b218-4590-b624-31ccb1409e20' class='sc-var-data-in' type='checkbox'><label for='data-3e539e2f-b218-4590-b624-31ccb1409e20' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([  6358.67925226,   6900.32304418,   7441.96683611,   7983.61062803,
         8525.25441996,   9066.89821189,   9608.54200381,  10150.18579574,
        10691.82958766,  11233.47337959,  11775.11717151,  12316.76096344,
        12858.40475537,  13400.04854729,  13941.69233922,  14483.33613114,
        15024.97992307,  15566.623715  ,  16108.26750692,  16649.91129885,
        17191.55509077,  17733.1988827 ,  18274.84267462,  18816.48646655,
        19358.13025848,  19899.7740504 ,  20441.41784233,  20983.06163425,
        21524.70542618,  22066.34921811,  22607.99301003,  23149.63680196,
        23691.28059388,  24232.92438581,  24774.56817774,  25316.21196966,
        25857.85576159,  26399.49955351,  26941.14334544,  27482.78713736,
        28024.43092929,  28566.07472122,  29107.71851314,  29649.36230507,
        30191.00609699,  30732.64988892,  31274.29368085,  31815.93747277,
        32357.5812647 ,  32899.22505662,  33440.86884855,  33982.51264047,
        34524.1564324 ,  35065.80022433,  35607.44401625,  36149.08780818,
        36690.7316001 ,  37232.37539203,  37774.01918396,  38315.66297588,
        38857.30676781,  39398.95055973,  39940.59435166,  40482.23814358,
        41023.88193551,  41565.52572744,  42107.16951936,  42648.81331129,
        43190.45710321,  43732.10089514,  44273.74468707,  44815.38847899,
        45357.03227092,  45898.67606284,  46440.31985477,  46981.9636467 ,
        47523.60743862,  48065.25123055,  48606.89502247,  49148.5388144 ,
        49690.18260632,  50231.82639825,  50773.47019018,  51315.1139821 ,
        51856.75777403,  52398.40156595,  52940.04535788,  53481.68914981,
        54023.33294173,  54564.97673366,  55106.62052558,  55648.26431751,
        56189.90810943,  56731.55190136,  57273.19569329,  57814.83948521,
        58356.48327714,  58898.12706906,  59439.77086099,  59981.41465292,
        60523.05844484,  61064.70223677,  61606.34602869,  62147.98982062,
        62689.63361255,  63231.27740447,  63772.9211964 ,  64314.56498832,
        64856.20878025,  65397.85257217,  65939.4963641 ,  66481.14015603,
        67022.78394795,  67564.42773988,  68106.0715318 ,  68647.71532373,
        69189.35911566,  69731.00290758,  70272.64669951,  70814.29049143,
        71355.93428336,  71897.57807528,  72439.22186721,  72980.86565914,
        73522.50945106,  74064.15324299,  74605.79703491,  75147.44082684,
        75689.08461877,  76230.72841069,  76772.37220262,  77314.01599454,
        77855.65978647,  78397.30357839,  78938.94737032,  79480.59116225,
        80022.23495417,  80563.8787461 ,  81105.52253802,  81647.16632995,
        82188.81012188,  82730.4539138 ,  83272.09770573,  83813.74149765,
        84355.38528958,  84897.02908151,  85438.67287343,  85980.31666536,
        86521.96045728,  87063.60424921,  87605.24804113,  88146.89183306,
        88688.53562499,  89230.17941691,  89771.82320884,  90313.46700076,
        90855.11079269,  91396.75458462,  91938.39837654,  92480.04216847,
        93021.68596039,  93563.32975232,  94104.97354424,  94646.61733617,
        95188.2611281 ,  95729.90492002,  96271.54871195,  96813.19250387,
        97354.8362958 ,  97896.48008773,  98438.12387965,  98979.76767158,
        99521.4114635 , 100063.05525543, 100604.69904736, 101146.34283928,
       101687.98663121, 102229.63042313, 102771.27421506, 103312.91800698,
       103854.56179891, 104396.20559084, 104937.84938276, 105479.49317469,
       106021.13696661, 106562.78075854, 107104.42455047, 107646.06834239,
       108187.71213432, 108729.35592624, 109270.99971817, 109812.64351009,
       110354.28730202, 110895.93109395, 111437.57488587, 111979.2186778 ,
       112520.86246972, 113062.50626165, 113604.15005358, 114145.7938455 ,
       114687.43763743, 115229.08142935, 115770.72522128, 116312.36901321,
       116854.01280513, 117395.65659706, 117937.30038898, 118478.94418091,
       119020.58797283, 119562.23176476, 120103.87555669, 120645.51934861,
       121187.16314054, 121728.80693246, 122270.45072439, 122812.09451632,
       123353.73830824, 123895.38210017, 124437.02589209, 124978.66968402,
       125520.31347594, 126061.95726787, 126603.6010598 , 127145.24485172,
       127686.88864365, 128228.53243557, 128770.1762275 , 129311.82001943,
       129853.46381135, 130395.10760328, 130936.7513952 , 131478.39518713,
       132020.03897905, 132561.68277098, 133103.32656291, 133644.97035483,
       134186.61414676, 134728.25793868, 135269.90173061, 135811.54552254,
       136353.18931446, 136894.83310639, 137436.47689831, 137978.12069024,
       138519.76448217, 139061.40827409, 139603.05206602, 140144.69585794,
       140686.33964987, 141227.98344179, 141769.62723372, 142311.27102565,
       142852.91481757, 143394.5586095 , 143936.20240142, 144477.84619335,
       145019.48998528])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-2df68b7d-0133-43bd-bb9d-6da94fd1d86d' class='sc-section-summary-in' type='checkbox'  checked><label for='section-2df68b7d-0133-43bd-bb9d-6da94fd1d86d' class='sc-section-summary' >Data: <span>(2)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>sample</span></div><div class='sc-var-dims'>(time)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>0.0, 0.0, ..., 0.0, 0.0</div></span><span><div>σ = 0.0, 0.0, ..., 0.0, 0.0</div></span></div><input id='attrs-e33eafae-47e5-4476-bc79-ff7087067913' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-e33eafae-47e5-4476-bc79-ff7087067913' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-6b816ced-261d-4c2a-b053-34575ed9e2d5' class='sc-var-data-in' type='checkbox'><label for='data-6b816ced-261d-4c2a-b053-34575ed9e2d5' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,  319.,  701.,  689.,  658.,  664.,  696.,
        652.,  664.,  681.,  665.,  630.,  634.,  605.,  630.,  648.,
        608.,  618.,  595.,  609.,  599.,  637.,  643.,  634.,  553.,
        638.,  571.,  621.,  549.,  574.,  533.,  532.,  512.,  540.,
        571.,  546.,  514.,  501.,  439.,    8.,    0.,    0.,    0.,
        506.,  837.,  799.,  804.,  781.,  815.,  742.,  776.,  808.,
        783.,  708.,  727.,  724.,  674.,  699.,  715.,  732.,  626.,
        687.,  660.,  642.,  711.,  659.,  655.,  652.,  650.,  633.,
        635.,  568.,  616.,  568.,  586.,  633.,  618.,  601.,  338.,
          0.,    0.,    0.,  227.,  922., 1144., 1285., 1390., 1390.,
       1469., 1522., 1465., 1564., 1529., 1428., 1459., 1525., 1405.,
       1458., 1484., 1391., 1433., 1402., 1384., 1437., 1407., 1424.,
       1346., 1348., 1355., 1380., 1316., 1345., 1347., 1262., 1316.,
        798.,   18.,    0.,    0.,  536., 1462., 1528., 1495., 1570.,
       1520., 1555., 1554., 1498., 1521., 1438., 1407., 1449., 1427.,
       1424., 1331., 1439., 1371., 1364., 1369., 1305., 1411., 1372.,
       1391., 1280., 1253., 1312., 1281., 1296., 1275., 1251.,  644.,
         19.,    0.,  114.,  911., 1397., 1412., 1356., 1327., 1340.,
       1325., 1333., 1371., 1342., 1307., 1253., 1268., 1266., 1191.,
       1180., 1161., 1194., 1138., 1091., 1111., 1078., 1045., 1097.,
       1061., 1042., 1010., 1071.,  937.,  262.,    0.,    5.,  392.,
        959., 1111., 1120., 1108., 1062., 1048., 1011., 1056.,  955.,
       1026.,  977.,  943.,  940.,  938.,  950.,  901.,  903.,  870.,
        854.,  790.,  788.,  844.,  829.,  794.,  743.,  724.,  507.,
        113.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])<br><br>Variances (σ²):<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,  319.,  701.,  689.,  658.,  664.,  696.,
        652.,  664.,  681.,  665.,  630.,  634.,  605.,  630.,  648.,
        608.,  618.,  595.,  609.,  599.,  637.,  643.,  634.,  553.,
        638.,  571.,  621.,  549.,  574.,  533.,  532.,  512.,  540.,
        571.,  546.,  514.,  501.,  439.,    8.,    0.,    0.,    0.,
        506.,  837.,  799.,  804.,  781.,  815.,  742.,  776.,  808.,
        783.,  708.,  727.,  724.,  674.,  699.,  715.,  732.,  626.,
        687.,  660.,  642.,  711.,  659.,  655.,  652.,  650.,  633.,
        635.,  568.,  616.,  568.,  586.,  633.,  618.,  601.,  338.,
          0.,    0.,    0.,  227.,  922., 1144., 1285., 1390., 1390.,
       1469., 1522., 1465., 1564., 1529., 1428., 1459., 1525., 1405.,
       1458., 1484., 1391., 1433., 1402., 1384., 1437., 1407., 1424.,
       1346., 1348., 1355., 1380., 1316., 1345., 1347., 1262., 1316.,
        798.,   18.,    0.,    0.,  536., 1462., 1528., 1495., 1570.,
       1520., 1555., 1554., 1498., 1521., 1438., 1407., 1449., 1427.,
       1424., 1331., 1439., 1371., 1364., 1369., 1305., 1411., 1372.,
       1391., 1280., 1253., 1312., 1281., 1296., 1275., 1251.,  644.,
         19.,    0.,  114.,  911., 1397., 1412., 1356., 1327., 1340.,
       1325., 1333., 1371., 1342., 1307., 1253., 1268., 1266., 1191.,
       1180., 1161., 1194., 1138., 1091., 1111., 1078., 1045., 1097.,
       1061., 1042., 1010., 1071.,  937.,  262.,    0.,    5.,  392.,
        959., 1111., 1120., 1108., 1062., 1048., 1011., 1056.,  955.,
       1026.,  977.,  943.,  940.,  938.,  950.,  901.,  903.,  870.,
        854.,  790.,  788.,  844.,  829.,  794.,  743.,  724.,  507.,
        113.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])</pre></li><li class='sc-var-item'><div class='sc-var-name'><span>vanadium</span></div><div class='sc-var-dims'>(time)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>0.0, 0.0, ..., 0.0, 0.0</div></span><span><div>σ = 0.0, 0.0, ..., 0.0, 0.0</div></span></div><input id='attrs-2e9afd20-b134-4e99-8695-35019dcd4627' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-2e9afd20-b134-4e99-8695-35019dcd4627' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b1a54aae-317d-4a8b-9f94-d885a96d5b27' class='sc-var-data-in' type='checkbox'><label for='data-b1a54aae-317d-4a8b-9f94-d885a96d5b27' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,  226.,  439.,  426.,  453.,  442.,  433.,
        449.,  417.,  443.,  427.,  453.,  439.,  451.,  404.,  425.,
        469.,  476.,  472.,  418.,  408.,  434.,  442.,  460.,  456.,
        482.,  424.,  478.,  459.,  439.,  473.,  442.,  420.,  424.,
        465.,  435.,  429.,  405.,  394.,    7.,    0.,    0.,    0.,
        370.,  717.,  717.,  688.,  675.,  709.,  671.,  694.,  681.,
        723.,  707.,  692.,  680.,  721.,  717.,  720.,  693.,  670.,
        695.,  684.,  693.,  715.,  715.,  609.,  714.,  710.,  682.,
        692.,  720.,  653.,  696.,  662.,  650.,  734.,  688.,  347.,
          0.,    0.,    0.,  250.,  946.,  918.,  946.,  930.,  884.,
        923.,  974.,  924.,  893.,  898.,  945.,  927.,  931.,  925.,
        945.,  962.,  953.,  974.,  904.,  881.,  946.,  957.,  946.,
        883., 1037.,  916.,  933.,  943.,  991.,  994.,  933.,  889.,
        611.,   14.,    0.,    0.,  350., 1068., 1143., 1166., 1161.,
       1167., 1210., 1123., 1118., 1213., 1111., 1164., 1187., 1230.,
       1189., 1115., 1067., 1157., 1184., 1187., 1186., 1142., 1133.,
       1198., 1221., 1109., 1174., 1154., 1120., 1121., 1140.,  598.,
         14.,    0.,  105.,  817., 1373., 1442., 1377., 1244., 1333.,
       1368., 1384., 1361., 1356., 1373., 1384., 1385., 1347., 1348.,
       1315., 1393., 1355., 1332., 1316., 1397., 1361., 1397., 1392.,
       1381., 1334., 1287., 1409., 1165.,  429.,    0.,   14.,  569.,
       1388., 1603., 1579., 1573., 1508., 1555., 1553., 1522., 1493.,
       1554., 1473., 1619., 1550., 1592., 1622., 1529., 1500., 1576.,
       1575., 1534., 1555., 1603., 1516., 1566., 1559., 1577., 1074.,
        271.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])<br><br>Variances (σ²):<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,  226.,  439.,  426.,  453.,  442.,  433.,
        449.,  417.,  443.,  427.,  453.,  439.,  451.,  404.,  425.,
        469.,  476.,  472.,  418.,  408.,  434.,  442.,  460.,  456.,
        482.,  424.,  478.,  459.,  439.,  473.,  442.,  420.,  424.,
        465.,  435.,  429.,  405.,  394.,    7.,    0.,    0.,    0.,
        370.,  717.,  717.,  688.,  675.,  709.,  671.,  694.,  681.,
        723.,  707.,  692.,  680.,  721.,  717.,  720.,  693.,  670.,
        695.,  684.,  693.,  715.,  715.,  609.,  714.,  710.,  682.,
        692.,  720.,  653.,  696.,  662.,  650.,  734.,  688.,  347.,
          0.,    0.,    0.,  250.,  946.,  918.,  946.,  930.,  884.,
        923.,  974.,  924.,  893.,  898.,  945.,  927.,  931.,  925.,
        945.,  962.,  953.,  974.,  904.,  881.,  946.,  957.,  946.,
        883., 1037.,  916.,  933.,  943.,  991.,  994.,  933.,  889.,
        611.,   14.,    0.,    0.,  350., 1068., 1143., 1166., 1161.,
       1167., 1210., 1123., 1118., 1213., 1111., 1164., 1187., 1230.,
       1189., 1115., 1067., 1157., 1184., 1187., 1186., 1142., 1133.,
       1198., 1221., 1109., 1174., 1154., 1120., 1121., 1140.,  598.,
         14.,    0.,  105.,  817., 1373., 1442., 1377., 1244., 1333.,
       1368., 1384., 1361., 1356., 1373., 1384., 1385., 1347., 1348.,
       1315., 1393., 1355., 1332., 1316., 1397., 1361., 1397., 1392.,
       1381., 1334., 1287., 1409., 1165.,  429.,    0.,   14.,  569.,
       1388., 1603., 1579., 1573., 1508., 1555., 1553., 1522., 1493.,
       1554., 1473., 1619., 1550., 1592., 1622., 1529., 1500., 1576.,
       1575., 1534., 1555., 1603., 1516., 1566., 1559., 1577., 1074.,
        271.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])</pre></li></ul></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_24_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_24_0.svg" /></div>
</div>
</section>
<section id="Stitch-the-frames">
<h2>Stitch the frames<a class="headerlink" href="#Stitch-the-frames" title="Permalink to this headline">#</a></h2>
<p>Wave-frame multiplication consists of making 6 new pulses from the original pulse. This implies that the WFM choppers are acting as a source chopper. Hence, to compute a wavelength from a time and a distance between source and detector, the location of the source must now be at the position of the WFM choppers, or more exactly at the mid-point between the two WFM choppers.</p>
<p>The stitching operation equates to converting the <code class="docutils literal notranslate"><span class="pre">time</span></code> dimension to <code class="docutils literal notranslate"><span class="pre">time-of-flight</span></code>, by subtracting from each frame a time shift equal to the mid-point between the two WFM choppers.</p>
<p>This is performed with the <code class="docutils literal notranslate"><span class="pre">stitch</span></code> function in the <code class="docutils literal notranslate"><span class="pre">wfm</span></code> module:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stitched</span> <span class="o">=</span> <span class="n">wfm</span><span class="o">.</span><span class="n">stitch</span><span class="p">(</span><span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">257</span><span class="p">)</span>
<span class="n">stitched</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (13.74 KB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-ac76423a-0872-4ee0-ba3b-de3894c96d9f' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-ac76423a-0872-4ee0-ba3b-de3894c96d9f' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span class='sc-has-index'>tof</span>: 257</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-a8c6caf9-d549-473b-9caf-4d9ab41f183f' class='sc-section-summary-in' type='checkbox'  checked><label for='section-a8c6caf9-d549-473b-9caf-4d9ab41f183f' class='sc-section-summary' >Coordinates: <span>(7)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-9b0c1165-6fe7-4248-b339-2f57542cbc35' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-9b0c1165-6fe7-4248-b339-2f57542cbc35' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-36411ffc-41be-45e5-ab7f-b0251501ae6e' class='sc-var-data-in' type='checkbox'><label for='data-36411ffc-41be-45e5-ab7f-b0251501ae6e' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-a302fa53-e7d7-4940-977a-2d9e506fbb46' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-a302fa53-e7d7-4940-977a-2d9e506fbb46' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dae5b17b-33a4-4e6e-a973-4c368450fe8b' class='sc-var-data-in' type='checkbox'><label for='data-dae5b17b-33a4-4e6e-a973-4c368450fe8b' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-a6dfa33e-a211-4bf1-8e9e-a1c25c41604b' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-a6dfa33e-a211-4bf1-8e9e-a1c25c41604b' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f25c764f-b284-4a71-88a2-eef78d56683d' class='sc-var-data-in' type='checkbox'><label for='data-f25c764f-b284-4a71-88a2-eef78d56683d' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 7.]</div></span></div><input id='attrs-048e1fb8-a390-4e52-a87e-0d144358b939' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-048e1fb8-a390-4e52-a87e-0d144358b939' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7652a9a-9a3d-4ac7-ac38-b2dd154ae2c4' class='sc-var-data-in' type='checkbox'><label for='data-c7652a9a-9a3d-4ac7-ac38-b2dd154ae2c4' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 7.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-f5f7aff8-242c-4f7d-b874-3997fe561e56' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-f5f7aff8-242c-4f7d-b874-3997fe561e56' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-681cbf7b-6f52-4741-a0f6-dc4f2a9795e2' class='sc-var-data-in' type='checkbox'><label for='data-681cbf7b-6f52-4741-a0f6-dc4f2a9795e2' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-c5e1d038-6e63-49e3-9bc6-bf36f0fccea8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-c5e1d038-6e63-49e3-9bc6-bf36f0fccea8' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-84804c88-5ea8-46d6-b931-82bb6f661f45' class='sc-var-data-in' type='checkbox'><label for='data-84804c88-5ea8-46d6-b931-82bb6f661f45' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>tof</span></div><div class='sc-var-dims'>(tof [bin-edge])</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>1.334e+04, 1.375e+04, ..., 1.170e+05, 1.174e+05</div></span></div><input id='attrs-9f82995c-e01c-415f-9ba2-aa193d89c7f1' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-9f82995c-e01c-415f-9ba2-aa193d89c7f1' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-db275441-d51f-4ccd-8759-b67ffe730efc' class='sc-var-data-in' type='checkbox'><label for='data-db275441-d51f-4ccd-8759-b67ffe730efc' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 13340.38075481,  13745.4276339 ,  14150.474513  ,  14555.52139209,
        14960.56827119,  15365.61515028,  15770.66202938,  16175.70890847,
        16580.75578757,  16985.80266666,  17390.84954576,  17795.89642485,
        18200.94330395,  18605.99018304,  19011.03706213,  19416.08394123,
        19821.13082032,  20226.17769942,  20631.22457851,  21036.27145761,
        21441.3183367 ,  21846.3652158 ,  22251.41209489,  22656.45897399,
        23061.50585308,  23466.55273218,  23871.59961127,  24276.64649037,
        24681.69336946,  25086.74024856,  25491.78712765,  25896.83400675,
        26301.88088584,  26706.92776494,  27111.97464403,  27517.02152313,
        27922.06840222,  28327.11528132,  28732.16216041,  29137.20903951,
        29542.2559186 ,  29947.3027977 ,  30352.34967679,  30757.39655589,
        31162.44343498,  31567.49031408,  31972.53719317,  32377.58407226,
        32782.63095136,  33187.67783045,  33592.72470955,  33997.77158864,
        34402.81846774,  34807.86534683,  35212.91222593,  35617.95910502,
        36023.00598412,  36428.05286321,  36833.09974231,  37238.1466214 ,
        37643.1935005 ,  38048.24037959,  38453.28725869,  38858.33413778,
        39263.38101688,  39668.42789597,  40073.47477507,  40478.52165416,
        40883.56853326,  41288.61541235,  41693.66229145,  42098.70917054,
        42503.75604964,  42908.80292873,  43313.84980783,  43718.89668692,
        44123.94356602,  44528.99044511,  44934.03732421,  45339.0842033 ,
        45744.13108239,  46149.17796149,  46554.22484058,  46959.27171968,
        47364.31859877,  47769.36547787,  48174.41235696,  48579.45923606,
        48984.50611515,  49389.55299425,  49794.59987334,  50199.64675244,
        50604.69363153,  51009.74051063,  51414.78738972,  51819.83426882,
        52224.88114791,  52629.92802701,  53034.9749061 ,  53440.0217852 ,
        53845.06866429,  54250.11554339,  54655.16242248,  55060.20930158,
        55465.25618067,  55870.30305977,  56275.34993886,  56680.39681796,
        57085.44369705,  57490.49057615,  57895.53745524,  58300.58433434,
        58705.63121343,  59110.67809252,  59515.72497162,  59920.77185071,
        60325.81872981,  60730.8656089 ,  61135.912488  ,  61540.95936709,
        61946.00624619,  62351.05312528,  62756.10000438,  63161.14688347,
        63566.19376257,  63971.24064166,  64376.28752076,  64781.33439985,
        65186.38127895,  65591.42815804,  65996.47503714,  66401.52191623,
        66806.56879533,  67211.61567442,  67616.66255352,  68021.70943261,
        68426.75631171,  68831.8031908 ,  69236.8500699 ,  69641.89694899,
        70046.94382809,  70451.99070718,  70857.03758628,  71262.08446537,
        71667.13134447,  72072.17822356,  72477.22510265,  72882.27198175,
        73287.31886084,  73692.36573994,  74097.41261903,  74502.45949813,
        74907.50637722,  75312.55325632,  75717.60013541,  76122.64701451,
        76527.6938936 ,  76932.7407727 ,  77337.78765179,  77742.83453089,
        78147.88140998,  78552.92828908,  78957.97516817,  79363.02204727,
        79768.06892636,  80173.11580546,  80578.16268455,  80983.20956365,
        81388.25644274,  81793.30332184,  82198.35020093,  82603.39708003,
        83008.44395912,  83413.49083822,  83818.53771731,  84223.58459641,
        84628.6314755 ,  85033.6783546 ,  85438.72523369,  85843.77211278,
        86248.81899188,  86653.86587097,  87058.91275007,  87463.95962916,
        87869.00650826,  88274.05338735,  88679.10026645,  89084.14714554,
        89489.19402464,  89894.24090373,  90299.28778283,  90704.33466192,
        91109.38154102,  91514.42842011,  91919.47529921,  92324.5221783 ,
        92729.5690574 ,  93134.61593649,  93539.66281559,  93944.70969468,
        94349.75657378,  94754.80345287,  95159.85033197,  95564.89721106,
        95969.94409016,  96374.99096925,  96780.03784835,  97185.08472744,
        97590.13160654,  97995.17848563,  98400.22536473,  98805.27224382,
        99210.31912291,  99615.36600201, 100020.4128811 , 100425.4597602 ,
       100830.50663929, 101235.55351839, 101640.60039748, 102045.64727658,
       102450.69415567, 102855.74103477, 103260.78791386, 103665.83479296,
       104070.88167205, 104475.92855115, 104880.97543024, 105286.02230934,
       105691.06918843, 106096.11606753, 106501.16294662, 106906.20982572,
       107311.25670481, 107716.30358391, 108121.350463  , 108526.3973421 ,
       108931.44422119, 109336.49110029, 109741.53797938, 110146.58485848,
       110551.63173757, 110956.67861667, 111361.72549576, 111766.77237486,
       112171.81925395, 112576.86613304, 112981.91301214, 113386.95989123,
       113792.00677033, 114197.05364942, 114602.10052852, 115007.14740761,
       115412.19428671, 115817.2411658 , 116222.2880449 , 116627.33492399,
       117032.38180309, 117437.42868218])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-d30423b2-7992-41b1-9000-1e4eabc46224' class='sc-section-summary-in' type='checkbox'  checked><label for='section-d30423b2-7992-41b1-9000-1e4eabc46224' class='sc-section-summary' >Data: <span>(2)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>sample</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>360.674, 523.405, ..., 378.749, 84.503</div></span><span><div>σ = 18.991, 22.878, ..., 19.461, 9.193</div></span></div><input id='attrs-21b2b3cd-ffe9-4623-bd43-b0c5459bcfc8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-21b2b3cd-ffe9-4623-bd43-b0c5459bcfc8' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9fd09f29-afd4-404f-be86-914c524d962a' class='sc-var-data-in' type='checkbox'><label for='data-9fd09f29-afd4-404f-be86-914c524d962a' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 360.67353486,  523.40509561,  515.241389  ,  497.78459404,
        493.92486266,  498.42591331,  520.47606204,  496.08403926,
        491.198498  ,  497.39587353,  509.25890553,  500.52921129,
        487.02436725,  471.28548043,  474.11181513,  458.54323399,
        459.54176404,  471.70500629,  484.58116121,  463.45758674,
        457.42774181,  461.60151291,  444.94720821,  452.21784357,
        452.74513897,  448.50662463,  476.35524644,  479.41868344,
        478.51665963,  473.61012533,  413.53916998,  456.19340837,
        460.37818166,  426.99975779,  464.26205135,  428.89022553,
        416.56959672,  429.2431891 ,  399.04719721,  398.09866326,
        393.19298137,  382.87894219,  403.25536379,  418.55936742,
        421.41600252,  408.30449695,  385.29742243,  378.30640339,
        361.34832673,  691.00178499,  554.37317422,  620.16272119,
        597.50053674,  601.04086602,  590.75443425,  590.96529752,
        609.46550368,  558.41604952,  570.07735486,  586.53860745,
        604.23083064,  586.96709747,  552.65858771,  532.98702095,
        543.65818549,  541.6128123 ,  519.93467934,  508.45953077,
        522.71949334,  533.48801812,  541.83879524,  529.51994899,
        468.12933166,  508.65007828,  502.61947398,  490.67676917,
        480.09429861,  525.32492127,  510.72022991,  492.20252743,
        489.81583425,  487.87556023,  486.78326606,  483.65634121,
        473.3640047 ,  474.64000418,  449.01034376,  431.17011578,
        460.65122732,  430.44763637,  431.54326091,  444.08544457,
        473.3640047 ,  464.05675649,  455.88585618,  549.2881028 ,
        646.45100076,  751.02333862,  855.49513646,  935.25099734,
        993.84916557, 1039.45650321, 1039.45650321, 1083.45050822,
       1114.68244588, 1135.17458108, 1095.54228576, 1149.8069454 ,
       1159.2176779 , 1138.98353048, 1067.8732997 , 1084.59375764,
       1110.00930612, 1136.21205432, 1050.67365972, 1078.79606111,
       1097.54657902, 1107.31108803, 1040.20431365, 1062.12214312,
       1063.25278285, 1048.11569731, 1034.96964061, 1062.16366599,
       1066.77643603, 1052.31744726, 1064.88205797, 1025.54380672,
       1007.05713809, 1008.04846499, 1013.28283998, 1025.67259528,
       1016.40152052,  984.1185311 , 1005.54980927, 1006.77867374,
        987.35706544,  943.73676766,  983.17033938, 1089.53547449,
       1197.80973589, 1116.94335572, 1143.12805576, 1121.20689773,
       1147.80657534, 1166.78520859, 1136.67185963, 1159.11261092,
       1162.45625006, 1154.43744371, 1120.22003008, 1134.76536943,
       1105.86170118, 1071.38256932, 1052.16928059, 1078.36248796,
       1075.40523779, 1066.76768328, 1064.88205797, 1007.69733165,
       1034.50728375, 1068.5845074 , 1025.24810497, 1021.0051861 ,
       1021.78314043, 1017.24034752,  975.89261633, 1039.21415454,
       1041.69836832, 1027.76279893, 1040.20431365,  974.86807774,
        948.11387584,  941.9763745 ,  981.12728936,  963.15173868,
        962.86016953,  967.57729824,  953.45830331,  995.7638762 ,
       1017.78078833, 1121.14580135, 1052.55901756, 1055.45373235,
       1043.00677901, 1014.03094846,  992.97678152,  998.50405635,
        998.74158215,  990.848825  ,  996.58680494, 1014.50350967,
       1019.07492252, 1003.56160238,  978.7644794 ,  952.74805544,
        940.0681252 ,  948.22363027,  946.82416834,  913.16240455,
        888.4933567 ,  882.41631208,  869.28783078,  882.68775725,
        882.43641836,  851.00827385,  818.94419537,  824.46168085,
        824.94882712,  806.13964781,  783.91559415,  803.36776698,
        814.26127264,  793.42687044,  780.7976102 ,  766.01820527,
        765.0679836 ,  800.90497478,  843.15592303,  766.56541809,
        873.36768593,  804.61687322,  833.72663343,  836.69497244,
        828.57396083,  802.50666543,  789.77181011,  781.40019029,
        756.03634874,  781.14284192,  758.8088353 ,  717.96051308,
        767.25350525,  740.34447873,  720.51366981,  705.05088521,
        702.94180793,  701.86099684,  704.90477878,  708.65461816,
        673.777201  ,  674.84049556,  666.05071737,  650.15878721,
        638.63011061,  605.1652137 ,  590.22884394,  590.31117536,
        631.15200627,  623.44004502,  610.76690832,  593.26415205,
        555.62315244,  546.02107521,  486.47406059,  378.74850863,
         84.50257904])<br><br>Variances (σ²):<br>array([ 360.67353486,  523.40509561,  515.241389  ,  497.78459404,
        493.92486266,  498.42591331,  520.47606204,  496.08403926,
        491.198498  ,  497.39587353,  509.25890553,  500.52921129,
        487.02436725,  471.28548043,  474.11181513,  458.54323399,
        459.54176404,  471.70500629,  484.58116121,  463.45758674,
        457.42774181,  461.60151291,  444.94720821,  452.21784357,
        452.74513897,  448.50662463,  476.35524644,  479.41868344,
        478.51665963,  473.61012533,  413.53916998,  456.19340837,
        460.37818166,  426.99975779,  464.26205135,  428.89022553,
        416.56959672,  429.2431891 ,  399.04719721,  398.09866326,
        393.19298137,  382.87894219,  403.25536379,  418.55936742,
        421.41600252,  408.30449695,  385.29742243,  378.30640339,
        361.34832673,  691.00178499,  554.37317422,  620.16272119,
        597.50053674,  601.04086602,  590.75443425,  590.96529752,
        609.46550368,  558.41604952,  570.07735486,  586.53860745,
        604.23083064,  586.96709747,  552.65858771,  532.98702095,
        543.65818549,  541.6128123 ,  519.93467934,  508.45953077,
        522.71949334,  533.48801812,  541.83879524,  529.51994899,
        468.12933166,  508.65007828,  502.61947398,  490.67676917,
        480.09429861,  525.32492127,  510.72022991,  492.20252743,
        489.81583425,  487.87556023,  486.78326606,  483.65634121,
        473.3640047 ,  474.64000418,  449.01034376,  431.17011578,
        460.65122732,  430.44763637,  431.54326091,  444.08544457,
        473.3640047 ,  464.05675649,  455.88585618,  549.2881028 ,
        646.45100076,  751.02333862,  855.49513646,  935.25099734,
        993.84916557, 1039.45650321, 1039.45650321, 1083.45050822,
       1114.68244588, 1135.17458108, 1095.54228576, 1149.8069454 ,
       1159.2176779 , 1138.98353048, 1067.8732997 , 1084.59375764,
       1110.00930612, 1136.21205432, 1050.67365972, 1078.79606111,
       1097.54657902, 1107.31108803, 1040.20431365, 1062.12214312,
       1063.25278285, 1048.11569731, 1034.96964061, 1062.16366599,
       1066.77643603, 1052.31744726, 1064.88205797, 1025.54380672,
       1007.05713809, 1008.04846499, 1013.28283998, 1025.67259528,
       1016.40152052,  984.1185311 , 1005.54980927, 1006.77867374,
        987.35706544,  943.73676766,  983.17033938, 1089.53547449,
       1197.80973589, 1116.94335572, 1143.12805576, 1121.20689773,
       1147.80657534, 1166.78520859, 1136.67185963, 1159.11261092,
       1162.45625006, 1154.43744371, 1120.22003008, 1134.76536943,
       1105.86170118, 1071.38256932, 1052.16928059, 1078.36248796,
       1075.40523779, 1066.76768328, 1064.88205797, 1007.69733165,
       1034.50728375, 1068.5845074 , 1025.24810497, 1021.0051861 ,
       1021.78314043, 1017.24034752,  975.89261633, 1039.21415454,
       1041.69836832, 1027.76279893, 1040.20431365,  974.86807774,
        948.11387584,  941.9763745 ,  981.12728936,  963.15173868,
        962.86016953,  967.57729824,  953.45830331,  995.7638762 ,
       1017.78078833, 1121.14580135, 1052.55901756, 1055.45373235,
       1043.00677901, 1014.03094846,  992.97678152,  998.50405635,
        998.74158215,  990.848825  ,  996.58680494, 1014.50350967,
       1019.07492252, 1003.56160238,  978.7644794 ,  952.74805544,
        940.0681252 ,  948.22363027,  946.82416834,  913.16240455,
        888.4933567 ,  882.41631208,  869.28783078,  882.68775725,
        882.43641836,  851.00827385,  818.94419537,  824.46168085,
        824.94882712,  806.13964781,  783.91559415,  803.36776698,
        814.26127264,  793.42687044,  780.7976102 ,  766.01820527,
        765.0679836 ,  800.90497478,  843.15592303,  766.56541809,
        873.36768593,  804.61687322,  833.72663343,  836.69497244,
        828.57396083,  802.50666543,  789.77181011,  781.40019029,
        756.03634874,  781.14284192,  758.8088353 ,  717.96051308,
        767.25350525,  740.34447873,  720.51366981,  705.05088521,
        702.94180793,  701.86099684,  704.90477878,  708.65461816,
        673.777201  ,  674.84049556,  666.05071737,  650.15878721,
        638.63011061,  605.1652137 ,  590.22884394,  590.31117536,
        631.15200627,  623.44004502,  610.76690832,  593.26415205,
        555.62315244,  546.02107521,  486.47406059,  378.74850863,
         84.50257904])</pre></li><li class='sc-var-item'><div class='sc-var-name'><span>vanadium</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>237.099, 327.411, ..., 802.351, 202.657</div></span><span><div>σ = 15.398, 18.095, ..., 28.326, 14.236</div></span></div><input id='attrs-4d5a0f39-9a75-4db3-bede-446ff66b795d' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-4d5a0f39-9a75-4db3-bede-446ff66b795d' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9fe7f893-2cf9-4f75-939e-02e2df3c3d69' class='sc-var-data-in' type='checkbox'><label for='data-9fe7f893-2cf9-4f75-939e-02e2df3c3d69' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 237.09936585,  327.41126036,  318.56724487,  333.77155016,
        335.33786521,  330.00352224,  323.80191791,  332.67174437,
        326.09729803,  313.13656154,  331.28002225,  322.55032801,
        326.94387972,  338.18095198,  328.28878051,  334.73095202,
        323.88357691,  302.79725369,  317.81943444,  341.05536635,
        352.6543921 ,  355.86292565,  352.96652483,  324.92264557,
        309.91334608,  305.49540816,  324.54972834,  328.63431101,
        335.18311062,  343.96802482,  341.00155789,  354.04873669,
        345.96637899,  317.071624  ,  357.31490104,  348.08531764,
        338.42765441,  328.28878051,  353.32935915,  338.701096  ,
        325.42582536,  314.08038227,  316.99129964,  336.56875485,
        341.03134547,  325.29753878,  320.9837123 ,  309.60791987,
        300.50271434,  559.86223521,  457.70300237,  538.20859145,
        536.18008115,  515.64617135,  508.56718681,  511.69739152,
        530.19759768,  503.62390921,  512.06451577,  516.4463712 ,
        509.25890553,  538.26197727,  533.65318758,  525.90942389,
        517.4848203 ,  509.30332755,  526.12475647,  538.46167517,
        536.18008115,  538.19917955,  527.06074517,  514.3535964 ,
        501.03299076,  517.63985412,  515.19531695,  512.94139546,
        518.23263074,  532.65398869,  534.68446029,  518.66392361,
        455.41655429,  523.32614496,  532.35837609,  526.95879963,
        510.00671596,  516.38671339,  528.28750524,  529.47093157,
        488.32021338,  515.37759694,  507.65629703,  493.55215913,
        486.07678208,  538.19737205,  531.95135072,  618.50275352,
        670.70314774,  752.68967452,  686.48997838,  702.32802168,
        702.41339313,  692.64550111,  661.06442363,  682.78298306,
        705.76855579,  725.74201232,  690.97684098,  673.98487685,
        669.27440908,  673.58996063,  706.6808601 ,  696.9722071 ,
        694.36899247,  696.00157115,  691.72465142,  702.33687836,
        711.41403037,  719.15754754,  712.66334357,  723.62225831,
        709.49091651,  675.61873144,  658.82099232,  692.17215553,
        710.29862831,  715.55871275,  707.42867053,  675.6554676 ,
        699.14724941,  775.47942002,  684.9995094 ,  693.41918845,
        700.14102213,  705.18523923,  740.65769966,  742.54060014,
        729.01111329,  697.70713489,  665.57607645,  762.44060379,
        875.66086862,  820.70351847,  855.1157692 ,  869.69554552,
        869.9583009 ,  869.08117456,  872.69477644,  900.26484231,
        871.00982127,  839.10719139,  836.05206517,  896.13064074,
        868.31197416,  837.60281924,  870.45134514,  884.79524441,
        903.62368894,  914.91681862,  889.14660599,  843.64478074,
        816.39903559,  807.85966888,  865.2166721 ,  881.58221628,
        886.46937892,  887.54923298,  886.90317468,  860.61876259,
        850.89286466,  853.31382323,  895.87689989,  909.41503886,
        875.39692062,  834.79708565,  877.92944948,  866.33232   ,
        851.83256593,  837.62316338,  838.29549648,  900.73629791,
        928.44543011, 1019.18782277, 1029.95926604, 1062.63795003,
       1063.36762803, 1029.73496757,  933.17620197,  972.44582079,
       1004.58824033, 1023.00467366, 1034.48063354, 1024.27330831,
       1016.70565883, 1014.03094846, 1026.07526534, 1031.76302212,
       1035.1737507 , 1035.71745104, 1009.12767441, 1007.74819595,
       1001.60185453,  983.37072066, 1037.26659125, 1025.02617543,
       1008.99148596,  996.08349804,  985.16806707, 1018.95054554,
       1038.28910532, 1017.77000063, 1042.0144228 , 1042.58484322,
       1039.09227665, 1032.72620931, 1001.48540766,  978.19122686,
        981.99091911, 1053.66490146, 1082.52778053, 1064.91395735,
       1293.7520992 , 1161.68018112, 1190.98214886, 1180.36631843,
       1176.30581263, 1139.47159086, 1142.47920055, 1162.72062241,
       1161.34960395, 1144.05401976, 1129.30123786, 1119.74709717,
       1162.09741438, 1117.61514605, 1144.88300835, 1207.61495005,
       1159.10617265, 1181.80320543, 1199.16069016, 1209.59806773,
       1143.40215353, 1127.98438246, 1142.95443708, 1178.52197578,
       1177.8014335 , 1156.36298392, 1152.82589411, 1163.73369916,
       1198.74012565, 1154.0107504 , 1146.77767709, 1171.00287826,
       1165.83646655, 1174.9331713 , 1051.94604569,  802.35074298,
        202.6566276 ])<br><br>Variances (σ²):<br>array([ 237.09936585,  327.41126036,  318.56724487,  333.77155016,
        335.33786521,  330.00352224,  323.80191791,  332.67174437,
        326.09729803,  313.13656154,  331.28002225,  322.55032801,
        326.94387972,  338.18095198,  328.28878051,  334.73095202,
        323.88357691,  302.79725369,  317.81943444,  341.05536635,
        352.6543921 ,  355.86292565,  352.96652483,  324.92264557,
        309.91334608,  305.49540816,  324.54972834,  328.63431101,
        335.18311062,  343.96802482,  341.00155789,  354.04873669,
        345.96637899,  317.071624  ,  357.31490104,  348.08531764,
        338.42765441,  328.28878051,  353.32935915,  338.701096  ,
        325.42582536,  314.08038227,  316.99129964,  336.56875485,
        341.03134547,  325.29753878,  320.9837123 ,  309.60791987,
        300.50271434,  559.86223521,  457.70300237,  538.20859145,
        536.18008115,  515.64617135,  508.56718681,  511.69739152,
        530.19759768,  503.62390921,  512.06451577,  516.4463712 ,
        509.25890553,  538.26197727,  533.65318758,  525.90942389,
        517.4848203 ,  509.30332755,  526.12475647,  538.46167517,
        536.18008115,  538.19917955,  527.06074517,  514.3535964 ,
        501.03299076,  517.63985412,  515.19531695,  512.94139546,
        518.23263074,  532.65398869,  534.68446029,  518.66392361,
        455.41655429,  523.32614496,  532.35837609,  526.95879963,
        510.00671596,  516.38671339,  528.28750524,  529.47093157,
        488.32021338,  515.37759694,  507.65629703,  493.55215913,
        486.07678208,  538.19737205,  531.95135072,  618.50275352,
        670.70314774,  752.68967452,  686.48997838,  702.32802168,
        702.41339313,  692.64550111,  661.06442363,  682.78298306,
        705.76855579,  725.74201232,  690.97684098,  673.98487685,
        669.27440908,  673.58996063,  706.6808601 ,  696.9722071 ,
        694.36899247,  696.00157115,  691.72465142,  702.33687836,
        711.41403037,  719.15754754,  712.66334357,  723.62225831,
        709.49091651,  675.61873144,  658.82099232,  692.17215553,
        710.29862831,  715.55871275,  707.42867053,  675.6554676 ,
        699.14724941,  775.47942002,  684.9995094 ,  693.41918845,
        700.14102213,  705.18523923,  740.65769966,  742.54060014,
        729.01111329,  697.70713489,  665.57607645,  762.44060379,
        875.66086862,  820.70351847,  855.1157692 ,  869.69554552,
        869.9583009 ,  869.08117456,  872.69477644,  900.26484231,
        871.00982127,  839.10719139,  836.05206517,  896.13064074,
        868.31197416,  837.60281924,  870.45134514,  884.79524441,
        903.62368894,  914.91681862,  889.14660599,  843.64478074,
        816.39903559,  807.85966888,  865.2166721 ,  881.58221628,
        886.46937892,  887.54923298,  886.90317468,  860.61876259,
        850.89286466,  853.31382323,  895.87689989,  909.41503886,
        875.39692062,  834.79708565,  877.92944948,  866.33232   ,
        851.83256593,  837.62316338,  838.29549648,  900.73629791,
        928.44543011, 1019.18782277, 1029.95926604, 1062.63795003,
       1063.36762803, 1029.73496757,  933.17620197,  972.44582079,
       1004.58824033, 1023.00467366, 1034.48063354, 1024.27330831,
       1016.70565883, 1014.03094846, 1026.07526534, 1031.76302212,
       1035.1737507 , 1035.71745104, 1009.12767441, 1007.74819595,
       1001.60185453,  983.37072066, 1037.26659125, 1025.02617543,
       1008.99148596,  996.08349804,  985.16806707, 1018.95054554,
       1038.28910532, 1017.77000063, 1042.0144228 , 1042.58484322,
       1039.09227665, 1032.72620931, 1001.48540766,  978.19122686,
        981.99091911, 1053.66490146, 1082.52778053, 1064.91395735,
       1293.7520992 , 1161.68018112, 1190.98214886, 1180.36631843,
       1176.30581263, 1139.47159086, 1142.47920055, 1162.72062241,
       1161.34960395, 1144.05401976, 1129.30123786, 1119.74709717,
       1162.09741438, 1117.61514605, 1144.88300835, 1207.61495005,
       1159.10617265, 1181.80320543, 1199.16069016, 1209.59806773,
       1143.40215353, 1127.98438246, 1142.95443708, 1178.52197578,
       1177.8014335 , 1156.36298392, 1152.82589411, 1163.73369916,
       1198.74012565, 1154.0107504 , 1146.77767709, 1171.00287826,
       1165.83646655, 1174.9331713 , 1051.94604569,  802.35074298,
        202.6566276 ])</pre></li></ul></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stitched</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_27_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_27_0.svg" /></div>
</div>
<p>For diagnostic purposes, it can be useful to visualize the individual frames before and after the stitching process. The <code class="docutils literal notranslate"><span class="pre">wfm.plot</span></code> module provides two helper functions to do just this:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wfm</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">frames_before_stitching</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">],</span> <span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_29_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_29_0.svg" /></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">wfm</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">frames_after_stitching</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">],</span> <span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_30_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_30_0.svg" /></div>
</div>
</section>
<section id="Convert-to-wavelength">
<h2>Convert to wavelength<a class="headerlink" href="#Convert-to-wavelength" title="Permalink to this headline">#</a></h2>
<p>Now that the data coordinate is time-of-flight (<code class="docutils literal notranslate"><span class="pre">tof</span></code>), we can use <code class="docutils literal notranslate"><span class="pre">scippneutron</span></code> to perform the unit conversion from <code class="docutils literal notranslate"><span class="pre">tof</span></code> to <code class="docutils literal notranslate"><span class="pre">wavelength</span></code>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scippneutron.conversion.graph</span> <span class="kn">import</span> <span class="n">beamline</span><span class="p">,</span> <span class="n">tof</span>

<span class="n">graph</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">beamline</span><span class="o">.</span><span class="n">beamline</span><span class="p">(</span><span class="n">scatter</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span> <span class="o">**</span><span class="n">tof</span><span class="o">.</span><span class="n">elastic</span><span class="p">(</span><span class="s2">&quot;tof&quot;</span><span class="p">)}</span>
<span class="n">converted</span> <span class="o">=</span> <span class="n">stitched</span><span class="o">.</span><span class="n">transform_coords</span><span class="p">(</span><span class="s2">&quot;wavelength&quot;</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
<span class="n">converted</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_32_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_32_0.svg" /></div>
</div>
</section>
<section id="Normalization">
<h2>Normalization<a class="headerlink" href="#Normalization" title="Permalink to this headline">#</a></h2>
<p>Normalization is performed simply by dividing the counts of the <code class="docutils literal notranslate"><span class="pre">sample</span></code> run by the counts of the <code class="docutils literal notranslate"><span class="pre">vanadium</span></code> run.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">normalized</span> <span class="o">=</span> <span class="n">converted</span><span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">converted</span><span class="p">[</span><span class="s1">&#39;vanadium&#39;</span><span class="p">]</span>
<span class="n">normalized</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_34_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_34_0.svg" /></div>
</div>
</section>
<section id="Comparing-to-the-raw-wavelengths">
<h2>Comparing to the raw wavelengths<a class="headerlink" href="#Comparing-to-the-raw-wavelengths" title="Permalink to this headline">#</a></h2>
<p>The final step is a sanity check to verify that the wavelength-dependent data obtained from the stitching process agrees (to within the beamline resolution) with the original wavelength distribution that was generated at the start of the workflow.</p>
<p>For this, we simply histogram the raw neutron events using the same bins as the <code class="docutils literal notranslate"><span class="pre">normalized</span></code> data, filtering out the neutrons with invalid flight paths.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">],</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
        <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_indices&quot;</span><span class="p">]],</span>
        <span class="n">bins</span><span class="o">=</span><span class="n">normalized</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<p>We then normalize the <code class="docutils literal notranslate"><span class="pre">sample</span></code> by the <code class="docutils literal notranslate"><span class="pre">vanadium</span></code> run, and plot the resulting spectrum alongside the one obtained from the stitching.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">],</span>
        <span class="n">values</span><span class="o">=</span><span class="n">events</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">]</span>
        <span class="o">/</span> <span class="n">events</span><span class="p">[</span><span class="s2">&quot;vanadium&quot;</span><span class="p">][</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wavelength&quot;</span><span class="p">:</span> <span class="n">normalized</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]},</span>
<span class="p">)</span>

<span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">({</span><span class="s2">&quot;stitched&quot;</span><span class="p">:</span> <span class="n">normalized</span><span class="p">,</span> <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/tmp/ipykernel_4380/3402972659.py:4: RuntimeWarning: invalid value encountered in divide
  values=events[&#34;sample&#34;][&#34;wavelength_counts&#34;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_38_1.svg" src="../../_images/techniques_wfm_reducing-wfm-data_38_1.svg" /></div>
</div>
<p>We can see that the counts in the <code class="docutils literal notranslate"><span class="pre">stitched</span></code> data agree very well with the original data. There is some smoothing of the data seen in the <code class="docutils literal notranslate"><span class="pre">stitched</span></code> result, and this is expected because of the resolution limitations of the beamline due to its long source pulse. This smoothing (or smearing) would, however, be much stronger if WFM choppers were not used.</p>
</section>
<section id="Without-WFM-choppers">
<h2>Without WFM choppers<a class="headerlink" href="#Without-WFM-choppers" title="Permalink to this headline">#</a></h2>
<p>In this section, we compare the results obtained above to a beamline that does not have a WFM chopper system. We make a new set of events, where the number of events is equal to the number of neutrons that make it through the chopper cascade in the previous case.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nevents_no_wfm</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">events</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;valid_times&quot;</span><span class="p">])</span>
<span class="n">events_no_wfm</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;sample&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;wavelengths&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">nevents_no_wfm</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">y</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">y</span><span class="p">)),</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;angstrom&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="s2">&quot;birth_times&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents_no_wfm</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_length&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_t_0&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="s2">&quot;vanadium&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;wavelengths&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents_no_wfm</span><span class="p">)</span> <span class="o">*</span> <span class="mf">9.0</span> <span class="o">+</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;angstrom&quot;</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="s2">&quot;birth_times&quot;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">],</span>
            <span class="n">values</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="n">nevents_no_wfm</span><span class="p">)</span>
            <span class="o">*</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_length&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">unit</span><span class="o">=</span><span class="s2">&quot;us&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="o">+</span> <span class="n">coords</span><span class="p">[</span><span class="s2">&quot;source_pulse_t_0&quot;</span><span class="p">],</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events_no_wfm</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">alpha</span> <span class="o">*</span> <span class="n">dz</span> <span class="o">*</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;birth_times&quot;</span><span class="p">]</span>
<span class="n">events_no_wfm</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Variable (1.50 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-standalone-var-name'><span>(event: 196024)</span></div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>6.530e+04, 1.128e+05, ..., 1.006e+05, 5.153e+04</div></span></div><input id='attrs-ddfaea21-d118-4a38-bfe1-d386d82edc78' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-ddfaea21-d118-4a38-bfe1-d386d82edc78' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a63df996-3a8d-4bd1-81ee-4f8c5ce21c3d' class='sc-var-data-in' type='checkbox'><label for='data-a63df996-3a8d-4bd1-81ee-4f8c5ce21c3d' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 65302.94611623, 112805.42350186, 101930.39186309, ...,
        81065.33726131, 100603.8288193 ,  51528.26109646])</pre></li></ul></li></ul></div></div></div>
</div>
<p>We then histogram these events to create a new Dataset. Because we are no longer make new pulses with the WFM choppers, the event time-of-flight is simply the arrival time of the event at the detector.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events_no_wfm</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
<span class="n">tmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events_no_wfm</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">tmax</span> <span class="o">-</span> <span class="n">tmin</span><span class="p">)</span>
<span class="n">time_coord_no_wfm</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;tof&#39;</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="n">tmin</span> <span class="o">-</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">stop</span><span class="o">=</span><span class="n">tmax</span> <span class="o">+</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">num</span><span class="o">=</span><span class="mi">257</span><span class="p">,</span>
    <span class="n">unit</span><span class="o">=</span><span class="n">events_no_wfm</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">data_no_wfm</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Histogram the data</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events_no_wfm</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tof&#39;</span><span class="p">],</span>
            <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">])],</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">counts</span><span class="p">,</span>
            <span class="n">with_variances</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;tof&#39;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tof&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">us</span>
            <span class="p">)</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="n">data_no_wfm</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">tof</span><span class="o">=</span><span class="n">time_coord_no_wfm</span><span class="p">)</span>

<span class="n">ds_no_wfm</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">data_no_wfm</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">)</span>
<span class="n">ds_no_wfm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (13.71 KB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-8e55939d-cd0a-44e2-abe0-7e168b776d7b' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-8e55939d-cd0a-44e2-abe0-7e168b776d7b' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span class='sc-has-index'>tof</span>: 256</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-7622fa57-398f-4bf8-bf1d-18a27980b289' class='sc-section-summary-in' type='checkbox'  checked><label for='section-7622fa57-398f-4bf8-bf1d-18a27980b289' class='sc-section-summary' >Coordinates: <span>(7)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-58e8c93a-3d56-4bea-8745-3c6a29229e1f' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-58e8c93a-3d56-4bea-8745-3c6a29229e1f' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-26e6c4ca-4402-4104-96ba-ae64434ddec0' class='sc-var-data-in' type='checkbox'><label for='data-26e6c4ca-4402-4104-96ba-ae64434ddec0' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-58699ca7-6eec-4c9e-9333-188fe826acbe' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-58699ca7-6eec-4c9e-9333-188fe826acbe' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3c46207b-2cc8-47d4-b15f-77a34a1c3d66' class='sc-var-data-in' type='checkbox'><label for='data-3c46207b-2cc8-47d4-b15f-77a34a1c3d66' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-6d7b7f2c-3e68-4bff-bf67-dea5c0f3fefc' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-6d7b7f2c-3e68-4bff-bf67-dea5c0f3fefc' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ee4b3c6a-d337-4dff-961f-faf598319aec' class='sc-var-data-in' type='checkbox'><label for='data-ee4b3c6a-d337-4dff-961f-faf598319aec' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 0.]</div></span></div><input id='attrs-88ae1ab4-299a-4424-afb2-358d840d1075' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-88ae1ab4-299a-4424-afb2-358d840d1075' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-60c6c82c-5782-46e2-8679-6425e63cba64' class='sc-var-data-in' type='checkbox'><label for='data-60c6c82c-5782-46e2-8679-6425e63cba64' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 0.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-09fc5c8c-0b76-42b8-bc3b-727cf7d93bd4' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-09fc5c8c-0b76-42b8-bc3b-727cf7d93bd4' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1befc9fc-0028-43c2-a303-d811d778f7c1' class='sc-var-data-in' type='checkbox'><label for='data-1befc9fc-0028-43c2-a303-d811d778f7c1' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-e3a54d9d-b613-47e2-abd7-43a1733c3293' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-e3a54d9d-b613-47e2-abd7-43a1733c3293' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-282bca0a-8608-4b97-9b00-cdfa206a4bdb' class='sc-var-data-in' type='checkbox'><label for='data-282bca0a-8608-4b97-9b00-cdfa206a4bdb' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>tof</span></div><div class='sc-var-dims'>(tof [bin-edge])</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>1370.746, 2023.773, ..., 1.679e+05, 1.685e+05</div></span></div><input id='attrs-6e53e4ee-f764-445a-84c4-88c519c00de9' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-6e53e4ee-f764-445a-84c4-88c519c00de9' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a7e33e59-5acc-4884-adcc-acb029c125a9' class='sc-var-data-in' type='checkbox'><label for='data-a7e33e59-5acc-4884-adcc-acb029c125a9' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([  1370.74550387,   2023.77349072,   2676.80147757,   3329.82946442,
         3982.85745127,   4635.88543812,   5288.91342497,   5941.94141182,
         6594.96939867,   7247.99738552,   7901.02537237,   8554.05335923,
         9207.08134608,   9860.10933293,  10513.13731978,  11166.16530663,
        11819.19329348,  12472.22128033,  13125.24926718,  13778.27725403,
        14431.30524088,  15084.33322773,  15737.36121458,  16390.38920143,
        17043.41718828,  17696.44517513,  18349.47316198,  19002.50114883,
        19655.52913568,  20308.55712253,  20961.58510938,  21614.61309623,
        22267.64108308,  22920.66906993,  23573.69705678,  24226.72504363,
        24879.75303048,  25532.78101734,  26185.80900419,  26838.83699104,
        27491.86497789,  28144.89296474,  28797.92095159,  29450.94893844,
        30103.97692529,  30757.00491214,  31410.03289899,  32063.06088584,
        32716.08887269,  33369.11685954,  34022.14484639,  34675.17283324,
        35328.20082009,  35981.22880694,  36634.25679379,  37287.28478064,
        37940.31276749,  38593.34075434,  39246.36874119,  39899.39672804,
        40552.42471489,  41205.45270174,  41858.48068859,  42511.50867544,
        43164.5366623 ,  43817.56464915,  44470.592636  ,  45123.62062285,
        45776.6486097 ,  46429.67659655,  47082.7045834 ,  47735.73257025,
        48388.7605571 ,  49041.78854395,  49694.8165308 ,  50347.84451765,
        51000.8725045 ,  51653.90049135,  52306.9284782 ,  52959.95646505,
        53612.9844519 ,  54266.01243875,  54919.0404256 ,  55572.06841245,
        56225.0963993 ,  56878.12438615,  57531.152373  ,  58184.18035985,
        58837.2083467 ,  59490.23633355,  60143.2643204 ,  60796.29230726,
        61449.32029411,  62102.34828096,  62755.37626781,  63408.40425466,
        64061.43224151,  64714.46022836,  65367.48821521,  66020.51620206,
        66673.54418891,  67326.57217576,  67979.60016261,  68632.62814946,
        69285.65613631,  69938.68412316,  70591.71211001,  71244.74009686,
        71897.76808371,  72550.79607056,  73203.82405741,  73856.85204426,
        74509.88003111,  75162.90801796,  75815.93600481,  76468.96399166,
        77121.99197851,  77775.01996536,  78428.04795222,  79081.07593907,
        79734.10392592,  80387.13191277,  81040.15989962,  81693.18788647,
        82346.21587332,  82999.24386017,  83652.27184702,  84305.29983387,
        84958.32782072,  85611.35580757,  86264.38379442,  86917.41178127,
        87570.43976812,  88223.46775497,  88876.49574182,  89529.52372867,
        90182.55171552,  90835.57970237,  91488.60768922,  92141.63567607,
        92794.66366292,  93447.69164977,  94100.71963662,  94753.74762347,
        95406.77561032,  96059.80359718,  96712.83158403,  97365.85957088,
        98018.88755773,  98671.91554458,  99324.94353143,  99977.97151828,
       100630.99950513, 101284.02749198, 101937.05547883, 102590.08346568,
       103243.11145253, 103896.13943938, 104549.16742623, 105202.19541308,
       105855.22339993, 106508.25138678, 107161.27937363, 107814.30736048,
       108467.33534733, 109120.36333418, 109773.39132103, 110426.41930788,
       111079.44729473, 111732.47528158, 112385.50326843, 113038.53125528,
       113691.55924214, 114344.58722899, 114997.61521584, 115650.64320269,
       116303.67118954, 116956.69917639, 117609.72716324, 118262.75515009,
       118915.78313694, 119568.81112379, 120221.83911064, 120874.86709749,
       121527.89508434, 122180.92307119, 122833.95105804, 123486.97904489,
       124140.00703174, 124793.03501859, 125446.06300544, 126099.09099229,
       126752.11897914, 127405.14696599, 128058.17495284, 128711.20293969,
       129364.23092654, 130017.25891339, 130670.28690024, 131323.3148871 ,
       131976.34287395, 132629.3708608 , 133282.39884765, 133935.4268345 ,
       134588.45482135, 135241.4828082 , 135894.51079505, 136547.5387819 ,
       137200.56676875, 137853.5947556 , 138506.62274245, 139159.6507293 ,
       139812.67871615, 140465.706703  , 141118.73468985, 141771.7626767 ,
       142424.79066355, 143077.8186504 , 143730.84663725, 144383.8746241 ,
       145036.90261095, 145689.9305978 , 146342.95858465, 146995.9865715 ,
       147649.01455835, 148302.0425452 , 148955.07053206, 149608.09851891,
       150261.12650576, 150914.15449261, 151567.18247946, 152220.21046631,
       152873.23845316, 153526.26644001, 154179.29442686, 154832.32241371,
       155485.35040056, 156138.37838741, 156791.40637426, 157444.43436111,
       158097.46234796, 158750.49033481, 159403.51832166, 160056.54630851,
       160709.57429536, 161362.60228221, 162015.63026906, 162668.65825591,
       163321.68624276, 163974.71422961, 164627.74221646, 165280.77020331,
       165933.79819017, 166586.82617702, 167239.85416387, 167892.88215072,
       168545.91013757])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-7f4e7c7f-a11e-4e0a-951a-4e6e75a4b23d' class='sc-section-summary-in' type='checkbox'  checked><label for='section-7f4e7c7f-a11e-4e0a-951a-4e6e75a4b23d' class='sc-section-summary' >Data: <span>(2)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>sample</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>0.0, 0.0, ..., 0.0, 0.0</div></span><span><div>σ = 0.0, 0.0, ..., 0.0, 0.0</div></span></div><input id='attrs-36206388-eb4c-4879-9f33-63cf4f319225' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-36206388-eb4c-4879-9f33-63cf4f319225' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4e098e90-4a44-4826-867e-e898850bc7a2' class='sc-var-data-in' type='checkbox'><label for='data-4e098e90-4a44-4826-867e-e898850bc7a2' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,   75.,  402.,  688., 1035., 1339., 1418.,
       1404., 1441., 1402., 1336., 1339., 1392., 1361., 1349., 1313.,
       1411., 1332., 1253., 1325., 1254., 1332., 1231., 1324., 1266.,
       1181., 1211., 1221., 1215., 1202., 1135., 1160., 1134., 1147.,
       1148., 1156., 1144., 1155., 1140., 1129., 1023., 1121., 1016.,
       1034., 1077., 1030., 1004., 1014.,  978.,  924., 1001.,  931.,
        913.,  965.,  877.,  914.,  884.,  891.,  864.,  859.,  881.,
        868.,  842.,  834.,  786.,  834.,  836.,  826.,  803.,  834.,
        893.,  924., 1085., 1213., 1310., 1457., 1402., 1466., 1490.,
       1520., 1540., 1483., 1556., 1448., 1463., 1409., 1536., 1433.,
       1458., 1464., 1445., 1478., 1412., 1343., 1381., 1363., 1348.,
       1389., 1282., 1324., 1236., 1280., 1195., 1287., 1281., 1257.,
       1265., 1182., 1232., 1269., 1178., 1162., 1187., 1245., 1193.,
       1075., 1109., 1157., 1111., 1069., 1058., 1085., 1040., 1016.,
       1081.,  997.,  990.,  992., 1032.,  973.,  962.,  920.,  976.,
        957.,  977.,  967.,  937.,  974.,  911.,  883.,  925.,  905.,
        816.,  851.,  858.,  832.,  820.,  792.,  832.,  815.,  783.,
        764.,  745.,  725.,  783.,  738.,  716.,  733.,  706.,  708.,
        645.,  708.,  678.,  686.,  637.,  590.,  590.,  584.,  585.,
        599.,  592.,  536.,  550.,  515.,  549.,  505.,  524.,  494.,
        483.,  456.,  447.,  448.,  448.,  432.,  424.,  443.,  398.,
        349.,  366.,  356.,  345.,  332.,  347.,  319.,  318.,  309.,
        311.,  285.,  275.,  262.,  228.,  247.,  237.,  226.,  195.,
        186.,  173.,  159.,  158.,  162.,  129.,   95.,   50.,   27.,
          8.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])<br><br>Variances (σ²):<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,   75.,  402.,  688., 1035., 1339., 1418.,
       1404., 1441., 1402., 1336., 1339., 1392., 1361., 1349., 1313.,
       1411., 1332., 1253., 1325., 1254., 1332., 1231., 1324., 1266.,
       1181., 1211., 1221., 1215., 1202., 1135., 1160., 1134., 1147.,
       1148., 1156., 1144., 1155., 1140., 1129., 1023., 1121., 1016.,
       1034., 1077., 1030., 1004., 1014.,  978.,  924., 1001.,  931.,
        913.,  965.,  877.,  914.,  884.,  891.,  864.,  859.,  881.,
        868.,  842.,  834.,  786.,  834.,  836.,  826.,  803.,  834.,
        893.,  924., 1085., 1213., 1310., 1457., 1402., 1466., 1490.,
       1520., 1540., 1483., 1556., 1448., 1463., 1409., 1536., 1433.,
       1458., 1464., 1445., 1478., 1412., 1343., 1381., 1363., 1348.,
       1389., 1282., 1324., 1236., 1280., 1195., 1287., 1281., 1257.,
       1265., 1182., 1232., 1269., 1178., 1162., 1187., 1245., 1193.,
       1075., 1109., 1157., 1111., 1069., 1058., 1085., 1040., 1016.,
       1081.,  997.,  990.,  992., 1032.,  973.,  962.,  920.,  976.,
        957.,  977.,  967.,  937.,  974.,  911.,  883.,  925.,  905.,
        816.,  851.,  858.,  832.,  820.,  792.,  832.,  815.,  783.,
        764.,  745.,  725.,  783.,  738.,  716.,  733.,  706.,  708.,
        645.,  708.,  678.,  686.,  637.,  590.,  590.,  584.,  585.,
        599.,  592.,  536.,  550.,  515.,  549.,  505.,  524.,  494.,
        483.,  456.,  447.,  448.,  448.,  432.,  424.,  443.,  398.,
        349.,  366.,  356.,  345.,  332.,  347.,  319.,  318.,  309.,
        311.,  285.,  275.,  262.,  228.,  247.,  237.,  226.,  195.,
        186.,  173.,  159.,  158.,  162.,  129.,   95.,   50.,   27.,
          8.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])</pre></li><li class='sc-var-item'><div class='sc-var-name'><span>vanadium</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>0.0, 0.0, ..., 0.0, 0.0</div></span><span><div>σ = 0.0, 0.0, ..., 0.0, 0.0</div></span></div><input id='attrs-f15be0fb-be8c-46b3-8b97-0d0e7f6daebf' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-f15be0fb-be8c-46b3-8b97-0d0e7f6daebf' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-1f8b41fc-5329-4a6c-9213-7d272e27a53c' class='sc-var-data-in' type='checkbox'><label for='data-1f8b41fc-5329-4a6c-9213-7d272e27a53c' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,   42.,  264.,  459.,  657.,  934.,  972.,
        929.,  960.,  967.,  893.,  906.,  994.,  878.,  915.,  923.,
        923.,  913.,  974.,  975.,  914.,  962.,  887.,  953.,  959.,
        929.,  930.,  974.,  961.,  937.,  939.,  883.,  976.,  920.,
        933.,  918.,  992.,  966.,  874.,  924.,  906.,  940.,  912.,
        955.,  934.,  892.,  918.,  940.,  891.,  916.,  900.,  926.,
        938.,  907.,  976.,  953.,  976.,  899.,  950.,  910.,  916.,
        908.,  956.,  975., 1035.,  913.,  974.,  951.,  949.,  936.,
        933.,  921.,  911.,  950.,  901.,  925.,  965.,  948.,  988.,
        951.,  948.,  912.,  920.,  941.,  928.,  923.,  889.,  913.,
        962.,  982., 1002.,  904.,  932.,  975.,  913.,  935.,  947.,
        894.,  916.,  957.,  937.,  993.,  961.,  988.,  943.,  967.,
        935.,  939.,  940.,  959.,  910.,  981.,  950.,  927.,  890.,
        931.,  977.,  929.,  932.,  956.,  888.,  874.,  935.,  891.,
        889.,  933.,  924.,  952.,  965.,  965.,  973.,  998.,  937.,
        960.,  913.,  992.,  937.,  942.,  998.,  899.,  939.,  911.,
        930.,  894.,  946.,  940.,  980.,  962.,  926.,  874.,  905.,
        981.,  919.,  987.,  945.,  899.,  995.,  924.,  920.,  941.,
        941.,  959.,  929.,  956.,  954.,  987.,  905.,  924.,  952.,
        929.,  929.,  977.,  989.,  945.,  920.,  948.,  974.,  915.,
        900.,  895.,  951.,  966.,  948.,  954.,  968.,  956.,  954.,
        932.,  935.,  898.,  939.,  967.,  970.,  951.,  927.,  857.,
        926.,  910.,  909.,  928.,  976.,  951.,  919.,  936.,  912.,
        899.,  966.,  880.,  914.,  930.,  905.,  690.,  479.,  257.,
         61.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])<br><br>Variances (σ²):<br>array([   0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,   42.,  264.,  459.,  657.,  934.,  972.,
        929.,  960.,  967.,  893.,  906.,  994.,  878.,  915.,  923.,
        923.,  913.,  974.,  975.,  914.,  962.,  887.,  953.,  959.,
        929.,  930.,  974.,  961.,  937.,  939.,  883.,  976.,  920.,
        933.,  918.,  992.,  966.,  874.,  924.,  906.,  940.,  912.,
        955.,  934.,  892.,  918.,  940.,  891.,  916.,  900.,  926.,
        938.,  907.,  976.,  953.,  976.,  899.,  950.,  910.,  916.,
        908.,  956.,  975., 1035.,  913.,  974.,  951.,  949.,  936.,
        933.,  921.,  911.,  950.,  901.,  925.,  965.,  948.,  988.,
        951.,  948.,  912.,  920.,  941.,  928.,  923.,  889.,  913.,
        962.,  982., 1002.,  904.,  932.,  975.,  913.,  935.,  947.,
        894.,  916.,  957.,  937.,  993.,  961.,  988.,  943.,  967.,
        935.,  939.,  940.,  959.,  910.,  981.,  950.,  927.,  890.,
        931.,  977.,  929.,  932.,  956.,  888.,  874.,  935.,  891.,
        889.,  933.,  924.,  952.,  965.,  965.,  973.,  998.,  937.,
        960.,  913.,  992.,  937.,  942.,  998.,  899.,  939.,  911.,
        930.,  894.,  946.,  940.,  980.,  962.,  926.,  874.,  905.,
        981.,  919.,  987.,  945.,  899.,  995.,  924.,  920.,  941.,
        941.,  959.,  929.,  956.,  954.,  987.,  905.,  924.,  952.,
        929.,  929.,  977.,  989.,  945.,  920.,  948.,  974.,  915.,
        900.,  895.,  951.,  966.,  948.,  954.,  968.,  956.,  954.,
        932.,  935.,  898.,  939.,  967.,  970.,  951.,  927.,  857.,
        926.,  910.,  909.,  928.,  976.,  951.,  919.,  936.,  912.,
        899.,  966.,  880.,  914.,  930.,  905.,  690.,  479.,  257.,
         61.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,    0.,
          0.,    0.,    0.,    0.])</pre></li></ul></div></li></ul></div></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds_no_wfm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_43_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_43_0.svg" /></div>
</div>
<p>We then perform the standard unit conversion and normalization</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">converted_no_wfm</span> <span class="o">=</span> <span class="n">ds_no_wfm</span><span class="o">.</span><span class="n">transform_coords</span><span class="p">(</span><span class="s2">&quot;wavelength&quot;</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
<span class="n">normalized_no_wfm</span> <span class="o">=</span> <span class="n">converted_no_wfm</span><span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">converted_no_wfm</span><span class="p">[</span><span class="s1">&#39;vanadium&#39;</span><span class="p">]</span>
<span class="n">normalized_no_wfm</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_45_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_45_0.svg" /></div>
</div>
<p>In the same manner and in the previous section, we compare to the real neutron wavelengths</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events_no_wfm</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">],</span> <span class="n">_</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span>
        <span class="n">item</span><span class="p">[</span><span class="s2">&quot;wavelengths&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">normalized_no_wfm</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span>
    <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">original_no_wfm</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
        <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">],</span>
        <span class="n">values</span><span class="o">=</span><span class="n">events_no_wfm</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">]</span>
        <span class="o">/</span> <span class="n">events_no_wfm</span><span class="p">[</span><span class="s2">&quot;vanadium&quot;</span><span class="p">][</span><span class="s2">&quot;wavelength_counts&quot;</span><span class="p">],</span>
    <span class="p">),</span>
    <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;wavelength&quot;</span><span class="p">:</span> <span class="n">normalized_no_wfm</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]},</span>
<span class="p">)</span>

<span class="n">w_min</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">angstrom</span>
<span class="n">w_max</span> <span class="o">=</span> <span class="mf">5.5</span> <span class="o">*</span> <span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">angstrom</span>
<span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;without WFM&quot;</span><span class="p">:</span> <span class="n">normalized_no_wfm</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
        <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original_no_wfm</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="n">errorbars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/tmp/ipykernel_4380/4211156826.py:4: RuntimeWarning: invalid value encountered in divide
  values=events_no_wfm[&#34;sample&#34;][&#34;wavelength_counts&#34;]
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_48_1.svg" src="../../_images/techniques_wfm_reducing-wfm-data_48_1.svg" /></div>
</div>
<p>We can see that there is a significant shift between the calculated wavelength of the Bragg edge around <span class="math notranslate nohighlight">\(4\unicode{x212B}\)</span> and the original underlying wavelengths. In comparison, the same plot for the WFM run yields a much better agreement</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;stitched&quot;</span><span class="p">:</span> <span class="n">normalized</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
        <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="n">errorbars</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_50_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_50_0.svg" /></div>
</div>
</section>
<section id="Working-in-event-mode">
<h2>Working in event mode<a class="headerlink" href="#Working-in-event-mode" title="Permalink to this headline">#</a></h2>
<p>It is also possible to work with WFM data in event mode. The <code class="docutils literal notranslate"><span class="pre">stitch</span></code> utility will accept both histogrammed and binned (event) data.</p>
<p>We first create a new dataset, with the same events as in the first example, but this time we bin the data with <code class="docutils literal notranslate"><span class="pre">sc.bin</span></code> instead of using <code class="docutils literal notranslate"><span class="pre">sc.histogram</span></code>, so we can retain the raw events.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_indices&quot;</span><span class="p">]]</span>

<span class="n">tmin</span> <span class="o">=</span> <span class="nb">min</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
<span class="n">tmax</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>

<span class="n">dt</span> <span class="o">=</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="p">(</span><span class="n">tmax</span> <span class="o">-</span> <span class="n">tmin</span><span class="p">)</span>
<span class="n">time_coord</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="n">tmin</span> <span class="o">-</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">stop</span><span class="o">=</span><span class="n">tmax</span> <span class="o">+</span> <span class="n">dt</span><span class="p">,</span>
    <span class="n">num</span><span class="o">=</span><span class="mi">257</span><span class="p">,</span>
    <span class="n">unit</span><span class="o">=</span><span class="n">events</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">][</span><span class="s2">&quot;arrival_times&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">unit</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">data_event</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># Bin the data</span>
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">events</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">da</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span>
            <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;event&#39;</span><span class="p">],</span>
            <span class="n">shape</span><span class="o">=</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">])],</span>
            <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">counts</span><span class="p">,</span>
            <span class="n">with_variances</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">),</span>
        <span class="n">coords</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;event&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s2">&quot;valid_times&quot;</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">units</span><span class="o">.</span><span class="n">us</span>
            <span class="p">)</span>
        <span class="p">},</span>
    <span class="p">)</span>
    <span class="n">data_event</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">da</span><span class="o">.</span><span class="n">bin</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time_coord</span><span class="p">)</span>

<span class="n">ds_event</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">Dataset</span><span class="p">(</span><span class="n">data_event</span><span class="p">,</span> <span class="n">coords</span><span class="o">=</span><span class="n">coords</span><span class="p">)</span>
<span class="n">ds_event</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (8.82 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-7034192b-595d-47e3-a0b7-02b41d083bbf' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-7034192b-595d-47e3-a0b7-02b41d083bbf' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span class='sc-has-index'>time</span>: 256</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-c6e5e431-2a24-46f8-a599-73d615d5faf6' class='sc-section-summary-in' type='checkbox'  checked><label for='section-c6e5e431-2a24-46f8-a599-73d615d5faf6' class='sc-section-summary' >Coordinates: <span>(7)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-847086ee-ee8b-4373-a855-1b8c7c3c07e4' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-847086ee-ee8b-4373-a855-1b8c7c3c07e4' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-40ab24dc-7986-4744-980d-50e7553e6309' class='sc-var-data-in' type='checkbox'><label for='data-40ab24dc-7986-4744-980d-50e7553e6309' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-83d23720-4fdb-46d4-9f79-9c981cd9462b' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-83d23720-4fdb-46d4-9f79-9c981cd9462b' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-c7910f43-556e-4b92-a2d3-1702ca68eeaf' class='sc-var-data-in' type='checkbox'><label for='data-c7910f43-556e-4b92-a2d3-1702ca68eeaf' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-463656e6-44bb-4d8e-96d9-d526f1a8bd47' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-463656e6-44bb-4d8e-96d9-d526f1a8bd47' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-265468fc-be52-408d-b817-e22a4a0abf54' class='sc-var-data-in' type='checkbox'><label for='data-265468fc-be52-408d-b817-e22a4a0abf54' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 0.]</div></span></div><input id='attrs-8824ad11-1c5f-47ad-84d7-87a63e81ebbe' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-8824ad11-1c5f-47ad-84d7-87a63e81ebbe' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bffd1f90-8205-40f3-b44b-c469f347a643' class='sc-var-data-in' type='checkbox'><label for='data-bffd1f90-8205-40f3-b44b-c469f347a643' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 0.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-bc4dce67-f013-4575-a85c-ebdce737878a' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-bc4dce67-f013-4575-a85c-ebdce737878a' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-323063cd-3adf-4e9b-86d3-8c22f0d127f8' class='sc-var-data-in' type='checkbox'><label for='data-323063cd-3adf-4e9b-86d3-8c22f0d127f8' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-ac6ca9ce-71c4-48e6-965c-14bb2f6d29eb' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-ac6ca9ce-71c4-48e6-965c-14bb2f6d29eb' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8a86d40c-ccf2-4285-9825-c62dcdf71384' class='sc-var-data-in' type='checkbox'><label for='data-8a86d40c-ccf2-4285-9825-c62dcdf71384' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>time</span></div><div class='sc-var-dims'>(time [bin-edge])</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>6358.679, 6900.323, ..., 1.445e+05, 1.450e+05</div></span></div><input id='attrs-052de8ee-81b3-4445-87d1-48b3b92f2a19' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-052de8ee-81b3-4445-87d1-48b3b92f2a19' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-cc37ad3d-7455-41ab-baa3-609ef2934aeb' class='sc-var-data-in' type='checkbox'><label for='data-cc37ad3d-7455-41ab-baa3-609ef2934aeb' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([  6358.67925226,   6900.32304418,   7441.96683611,   7983.61062803,
         8525.25441996,   9066.89821189,   9608.54200381,  10150.18579574,
        10691.82958766,  11233.47337959,  11775.11717151,  12316.76096344,
        12858.40475537,  13400.04854729,  13941.69233922,  14483.33613114,
        15024.97992307,  15566.623715  ,  16108.26750692,  16649.91129885,
        17191.55509077,  17733.1988827 ,  18274.84267462,  18816.48646655,
        19358.13025848,  19899.7740504 ,  20441.41784233,  20983.06163425,
        21524.70542618,  22066.34921811,  22607.99301003,  23149.63680196,
        23691.28059388,  24232.92438581,  24774.56817774,  25316.21196966,
        25857.85576159,  26399.49955351,  26941.14334544,  27482.78713736,
        28024.43092929,  28566.07472122,  29107.71851314,  29649.36230507,
        30191.00609699,  30732.64988892,  31274.29368085,  31815.93747277,
        32357.5812647 ,  32899.22505662,  33440.86884855,  33982.51264047,
        34524.1564324 ,  35065.80022433,  35607.44401625,  36149.08780818,
        36690.7316001 ,  37232.37539203,  37774.01918396,  38315.66297588,
        38857.30676781,  39398.95055973,  39940.59435166,  40482.23814358,
        41023.88193551,  41565.52572744,  42107.16951936,  42648.81331129,
        43190.45710321,  43732.10089514,  44273.74468707,  44815.38847899,
        45357.03227092,  45898.67606284,  46440.31985477,  46981.9636467 ,
        47523.60743862,  48065.25123055,  48606.89502247,  49148.5388144 ,
        49690.18260632,  50231.82639825,  50773.47019018,  51315.1139821 ,
        51856.75777403,  52398.40156595,  52940.04535788,  53481.68914981,
        54023.33294173,  54564.97673366,  55106.62052558,  55648.26431751,
        56189.90810943,  56731.55190136,  57273.19569329,  57814.83948521,
        58356.48327714,  58898.12706906,  59439.77086099,  59981.41465292,
        60523.05844484,  61064.70223677,  61606.34602869,  62147.98982062,
        62689.63361255,  63231.27740447,  63772.9211964 ,  64314.56498832,
        64856.20878025,  65397.85257217,  65939.4963641 ,  66481.14015603,
        67022.78394795,  67564.42773988,  68106.0715318 ,  68647.71532373,
        69189.35911566,  69731.00290758,  70272.64669951,  70814.29049143,
        71355.93428336,  71897.57807528,  72439.22186721,  72980.86565914,
        73522.50945106,  74064.15324299,  74605.79703491,  75147.44082684,
        75689.08461877,  76230.72841069,  76772.37220262,  77314.01599454,
        77855.65978647,  78397.30357839,  78938.94737032,  79480.59116225,
        80022.23495417,  80563.8787461 ,  81105.52253802,  81647.16632995,
        82188.81012188,  82730.4539138 ,  83272.09770573,  83813.74149765,
        84355.38528958,  84897.02908151,  85438.67287343,  85980.31666536,
        86521.96045728,  87063.60424921,  87605.24804113,  88146.89183306,
        88688.53562499,  89230.17941691,  89771.82320884,  90313.46700076,
        90855.11079269,  91396.75458462,  91938.39837654,  92480.04216847,
        93021.68596039,  93563.32975232,  94104.97354424,  94646.61733617,
        95188.2611281 ,  95729.90492002,  96271.54871195,  96813.19250387,
        97354.8362958 ,  97896.48008773,  98438.12387965,  98979.76767158,
        99521.4114635 , 100063.05525543, 100604.69904736, 101146.34283928,
       101687.98663121, 102229.63042313, 102771.27421506, 103312.91800698,
       103854.56179891, 104396.20559084, 104937.84938276, 105479.49317469,
       106021.13696661, 106562.78075854, 107104.42455047, 107646.06834239,
       108187.71213432, 108729.35592624, 109270.99971817, 109812.64351009,
       110354.28730202, 110895.93109395, 111437.57488587, 111979.2186778 ,
       112520.86246972, 113062.50626165, 113604.15005358, 114145.7938455 ,
       114687.43763743, 115229.08142935, 115770.72522128, 116312.36901321,
       116854.01280513, 117395.65659706, 117937.30038898, 118478.94418091,
       119020.58797283, 119562.23176476, 120103.87555669, 120645.51934861,
       121187.16314054, 121728.80693246, 122270.45072439, 122812.09451632,
       123353.73830824, 123895.38210017, 124437.02589209, 124978.66968402,
       125520.31347594, 126061.95726787, 126603.6010598 , 127145.24485172,
       127686.88864365, 128228.53243557, 128770.1762275 , 129311.82001943,
       129853.46381135, 130395.10760328, 130936.7513952 , 131478.39518713,
       132020.03897905, 132561.68277098, 133103.32656291, 133644.97035483,
       134186.61414676, 134728.25793868, 135269.90173061, 135811.54552254,
       136353.18931446, 136894.83310639, 137436.47689831, 137978.12069024,
       138519.76448217, 139061.40827409, 139603.05206602, 140144.69585794,
       140686.33964987, 141227.98344179, 141769.62723372, 142311.27102565,
       142852.91481757, 143394.5586095 , 143936.20240142, 144477.84619335,
       145019.48998528])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-e2e08cf4-4faa-4558-b079-dcacd358f420' class='sc-section-summary-in' type='checkbox'  checked><label for='section-e2e08cf4-4faa-4558-b079-dcacd358f420' class='sc-section-summary' >Data: <span>(2)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>sample</span></div><div class='sc-var-dims'>(time)</div><div class='sc-var-dtype'>DataArrayView</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>binned data [len=0, len=0, ..., len=0, len=0]</div></span></div><input id='attrs-ccebfbab-1671-433a-b608-e8bcbef5431b' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-ccebfbab-1671-433a-b608-e8bcbef5431b' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e86b6e61-2d1c-4639-9a82-a6f8052b3311' class='sc-var-data-in' type='checkbox'><label for='data-e86b6e61-2d1c-4639-9a82-a6f8052b3311' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>dim=&#x27;event&#x27;,
content=DataArray(
          dims=(event: 196024),
          data=float64[counts],
          coords={&#x27;time&#x27;:float64[µs]})</pre></li><li class='sc-var-item'><div class='sc-var-name'><span>vanadium</span></div><div class='sc-var-dims'>(time)</div><div class='sc-var-dtype'>DataArrayView</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>binned data [len=0, len=0, ..., len=0, len=0]</div></span></div><input id='attrs-8bda5fe6-68f8-490b-8d61-13534b8ff8b0' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-8bda5fe6-68f8-490b-8d61-13534b8ff8b0' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7429b1fc-c949-4f01-aefa-8068eed076de' class='sc-var-data-in' type='checkbox'><label for='data-7429b1fc-c949-4f01-aefa-8068eed076de' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>dim=&#x27;event&#x27;,
content=DataArray(
          dims=(event: 188750),
          data=float64[counts],
          coords={&#x27;time&#x27;:float64[µs]})</pre></li></ul></div></li></ul></div></div></div>
</div>
<p>The underlying events can be inspected by using the <code class="docutils literal notranslate"><span class="pre">.bins.constituents['data']</span></code> property of our objects:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_event</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">bins</span><span class="o">.</span><span class="n">constituents</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.DataArray (4.49 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-6ecbcc3b-e0e6-403f-b686-b744554e2740' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-6ecbcc3b-e0e6-403f-b686-b744554e2740' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span>event</span>: 196024</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-3890aa36-bdd4-4c1f-8165-4f79d01fef0c' class='sc-section-summary-in' type='checkbox'  checked><label for='section-3890aa36-bdd4-4c1f-8165-4f79d01fef0c' class='sc-section-summary' >Coordinates: <span>(1)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>time</span></div><div class='sc-var-dims'>(event)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>1.812e+04, 1.822e+04, ..., 1.333e+05, 1.334e+05</div></span></div><input id='attrs-d9821d13-bc6c-4bc3-82c6-0f922b6ec320' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-d9821d13-bc6c-4bc3-82c6-0f922b6ec320' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-37ec6a34-affc-4dc0-a9eb-1d7b7dc6db64' class='sc-var-data-in' type='checkbox'><label for='data-37ec6a34-affc-4dc0-a9eb-1d7b7dc6db64' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 18119.40258962,  18224.68653735,  18104.79393712, ...,
       133196.6964019 , 133288.52178163, 133352.36035354])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-10b56dad-7baf-43d4-ba25-e15be857a81b' class='sc-section-summary-in' type='checkbox'  checked><label for='section-10b56dad-7baf-43d4-ba25-e15be857a81b' class='sc-section-summary' >Data: <span>(1)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span></span></div><div class='sc-var-dims'>(event)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>1.0, 1.0, ..., 1.0, 1.0</div></span><span><div>σ = 1.0, 1.0, ..., 1.0, 1.0</div></span></div><input id='attrs-8e180bd4-dafd-436d-a5fe-aa92c3c74103' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-8e180bd4-dafd-436d-a5fe-aa92c3c74103' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-5f26ef6f-0011-4753-99da-addbaeff4f81' class='sc-var-data-in' type='checkbox'><label for='data-5f26ef6f-0011-4753-99da-addbaeff4f81' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([1., 1., 1., ..., 1., 1., 1.])<br><br>Variances (σ²):<br>array([1., 1., 1., ..., 1., 1., 1.])</pre></li></ul></div></li></ul></div></div></div>
</div>
<p>We can visualize this to make sure it looks the same as the histogrammed case above:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ds_event</span><span class="o">.</span><span class="n">hist</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_56_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_56_0.svg" /></div>
</div>
<p>As explained above, the <code class="docutils literal notranslate"><span class="pre">stitch</span></code> routine accepts both histogrammed and binned (event) data. So stitching the binned data works in the exact same way as above, namely</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">stitched_event</span> <span class="o">=</span> <span class="n">wfm</span><span class="o">.</span><span class="n">stitch</span><span class="p">(</span><span class="n">frames</span><span class="o">=</span><span class="n">frames</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">ds_event</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="n">stitched_event</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Dataset (8.80 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-d0f4d656-1d97-43f6-ab66-b16f9fc2cc8e' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-d0f4d656-1d97-43f6-ab66-b16f9fc2cc8e' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span class='sc-has-index'>tof</span>: 1</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-27c25425-2789-431a-b71d-59b1ac40eddc' class='sc-section-summary-in' type='checkbox'  checked><label for='section-27c25425-2789-431a-b71d-59b1ac40eddc' class='sc-section-summary' >Coordinates: <span>(7)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_1</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-165cff71-e47f-4ef6-a1e5-2fce79dd8041' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-165cff71-e47f-4ef6-a1e5-2fce79dd8041' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-27af67d9-fef2-45f3-87e9-706b384f09aa' class='sc-var-data-in' type='checkbox'><label for='data-27af67d9-fef2-45f3-87e9-706b384f09aa' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>chopper_wfm_2</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>PyObject</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[&#x27;frequency&#x27;, &#x27;position&#x27;, &#x27;phase&#x27;, &#x27;cutout...</div></span></div><input id='attrs-a0306af2-e111-4530-98f3-969751fe19b9' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-a0306af2-e111-4530-98f3-969751fe19b9' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-04d3fbf8-a1a0-45bd-96f3-c57fad4ad039' class='sc-var-data-in' type='checkbox'><label for='data-04d3fbf8-a1a0-45bd-96f3-c57fad4ad039' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>DataGroup(sizes={&#x27;frame&#x27;: 6}, keys=[
    frequency: Variable({}),
    position: Variable({}),
    phase: Variable({}),
    cutout_angles_center: Variable({&#x27;frame&#x27;: 6}),
    cutout_angles_width: Variable({&#x27;frame&#x27;: 6}),
    kind: Variable({}),
])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.  0. 60.]</div></span></div><input id='attrs-ed5b185d-f588-4df3-bc56-b30da083dfd7' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-ed5b185d-f588-4df3-bc56-b30da083dfd7' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d8579788-a324-4205-bfc5-ab0ebb4b8773' class='sc-var-data-in' type='checkbox'><label for='data-d8579788-a324-4205-bfc5-ab0ebb4b8773' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.,  0., 60.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_position</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[0. 0. 7.]</div></span></div><input id='attrs-7fa9f0c3-55b2-412a-8f75-721f823cec7f' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-7fa9f0c3-55b2-412a-8f75-721f823cec7f' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-07e6b0b4-8660-41f3-99d7-fe057f7c07c3' class='sc-var-data-in' type='checkbox'><label for='data-07e6b0b4-8660-41f3-99d7-fe057f7c07c3' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([0., 0., 7.])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_length</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>2860.0</div></span></div><input id='attrs-29e2d59f-e530-4fd8-8db4-1fff5bbcf1f8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-29e2d59f-e530-4fd8-8db4-1fff5bbcf1f8' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-54bf4871-705a-4ab0-b906-65de5a44ed00' class='sc-var-data-in' type='checkbox'><label for='data-54bf4871-705a-4ab0-b906-65de5a44ed00' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(2860.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>source_pulse_t_0</span></div><div class='sc-var-dims'>()</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>130.0</div></span></div><input id='attrs-5ac973a0-33ef-495d-bcd3-2ca584b14092' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-5ac973a0-33ef-495d-bcd3-2ca584b14092' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e1e0ae4e-348f-4f3b-8a91-95131e10db8b' class='sc-var-data-in' type='checkbox'><label for='data-e1e0ae4e-348f-4f3b-8a91-95131e10db8b' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array(130.)</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>tof</span></div><div class='sc-var-dims'>(tof [bin-edge])</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>µs</div><div class='sc-value-preview sc-preview'><span><div>1.334e+04, 1.174e+05</div></span></div><input id='attrs-778208a7-48f2-43e1-ac5d-ca392eba1929' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-778208a7-48f2-43e1-ac5d-ca392eba1929' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4dcb6d05-50e7-4945-8b5e-341af9d7e926' class='sc-var-data-in' type='checkbox'><label for='data-4dcb6d05-50e7-4945-8b5e-341af9d7e926' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 13340.38075481, 117437.42868218])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-fd8b5c03-9623-4a8c-8dbe-cfd022d58f31' class='sc-section-summary-in' type='checkbox'  checked><label for='section-fd8b5c03-9623-4a8c-8dbe-cfd022d58f31' class='sc-section-summary' >Data: <span>(2)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>sample</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>DataArrayView</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>binned data [len=195774]</div></span></div><input id='attrs-acccd010-c03b-4109-8011-09365f896b37' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-acccd010-c03b-4109-8011-09365f896b37' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f73c0e06-edb4-4f3c-b0e8-b7039a68e5eb' class='sc-var-data-in' type='checkbox'><label for='data-f73c0e06-edb4-4f3c-b0e8-b7039a68e5eb' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>dim=&#x27;event&#x27;,
content=DataArray(
          dims=(event: 195774),
          data=float64[counts],
          coords={&#x27;tof&#x27;:float64[µs]})</pre></li><li class='sc-var-item'><div class='sc-var-name'><span>vanadium</span></div><div class='sc-var-dims'>(tof)</div><div class='sc-var-dtype'>DataArrayView</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>binned data [len=188563]</div></span></div><input id='attrs-e7973535-89b6-4b40-b522-46ff7debb4a2' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-e7973535-89b6-4b40-b522-46ff7debb4a2' class='' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-e2deebbf-b2c1-46b4-b34c-90edf90c31e5' class='sc-var-data-in' type='checkbox'><label for='data-e2deebbf-b2c1-46b4-b34c-90edf90c31e5' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>dim=&#x27;event&#x27;,
content=DataArray(
          dims=(event: 188563),
          data=float64[counts],
          coords={&#x27;tof&#x27;:float64[µs]})</pre></li></ul></div></li></ul></div></div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">stitch</span></code> function will return a data structure with a single bin in the <code class="docutils literal notranslate"><span class="pre">'tof'</span></code> dimension. Visualizing this data is therefore slightly more tricky, because the data needs to be histogrammed using a finer binning before a useful plot can be made.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">({</span><span class="n">key</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">tof</span><span class="o">=</span><span class="mi">256</span><span class="p">)</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">stitched_event</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_60_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_60_0.svg" /></div>
</div>
<p>At this point, it may be useful to compare the results of the two different stitching operations.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rebinned</span> <span class="o">=</span> <span class="n">stitched_event</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">bin</span><span class="p">(</span><span class="n">tof</span><span class="o">=</span><span class="n">stitched</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;tof&#39;</span><span class="p">])</span>
<span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">({</span><span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="n">rebinned</span><span class="o">.</span><span class="n">hist</span><span class="p">(),</span> <span class="s2">&quot;histogram&quot;</span><span class="p">:</span> <span class="n">stitched</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]},</span> <span class="n">errorbars</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_62_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_62_0.svg" /></div>
</div>
<p>We note that histogramming the data early introduces some smoothing in the data.</p>
<p>We can of course continue in event mode and perform the unit conversion and normalization to the Vanadium.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">converted_event</span> <span class="o">=</span> <span class="n">stitched_event</span><span class="o">.</span><span class="n">transform_coords</span><span class="p">(</span><span class="s2">&quot;wavelength&quot;</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># In a normalization operation, the denominator must be histogrammed (it cannot be events)</span>
<span class="c1"># Note: we drop the variances with `sc.values` because the event normalization introduces correlations</span>
<span class="c1"># which are not handled by Scipp&#39;s uncertainty propagation. This is ok here as the size of the</span>
<span class="c1"># standard deviations is not the focus of this notebook.</span>
<span class="n">hist</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">values</span><span class="p">(</span>
    <span class="n">converted_event</span><span class="p">[</span><span class="s2">&quot;vanadium&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span>
        <span class="n">wavelength</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">)</span>
<span class="c1"># Normalizing binned data is done using the sc.lookup helper</span>
<span class="n">normalized_event</span> <span class="o">=</span> <span class="n">converted_event</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">bins</span> <span class="o">/</span> <span class="n">sc</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span>
    <span class="n">func</span><span class="o">=</span><span class="n">hist</span><span class="p">,</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;wavelength&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>Finally, we compare the end result with the original wavelengths, and see that the agreement is once again good.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">to_plot</span> <span class="o">=</span> <span class="n">normalized_event</span><span class="o">.</span><span class="n">bin</span><span class="p">(</span>
    <span class="n">wavelength</span><span class="o">=</span><span class="n">converted</span><span class="p">[</span><span class="s2">&quot;sample&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">]</span>
<span class="p">)</span><span class="o">.</span><span class="n">hist</span><span class="p">()</span>
<span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">({</span><span class="s2">&quot;stitched_event&quot;</span><span class="p">:</span> <span class="n">to_plot</span><span class="p">,</span> <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_67_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_67_0.svg" /></div>
</div>
<p>We can also compare directly to the histogrammed version, to see that both methods remain in agreement to a high degree.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sc</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s2">&quot;stitched&quot;</span><span class="p">:</span> <span class="n">normalized</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
        <span class="s2">&quot;original&quot;</span><span class="p">:</span> <span class="n">original</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
        <span class="s2">&quot;stitched_event&quot;</span><span class="p">:</span> <span class="n">to_plot</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">w_min</span><span class="p">:</span><span class="n">w_max</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_wfm_reducing-wfm-data_69_0.svg" src="../../_images/techniques_wfm_reducing-wfm-data_69_0.svg" /></div>
</div>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="introduction-to-wfm.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Introduction to Wavelength Frame Multiplication</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="../../utilities/utilities.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Modules</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Scipp contributors<br/>
  
      &copy; Copyright 2023 Scipp contributors.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>