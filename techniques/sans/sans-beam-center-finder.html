
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Beam center finder &#8212; ess  documentation</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" href="../../_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script src="../../_static/design-tabs.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reference" href="reference.html" />
    <link rel="prev" title="SANS" href="sans.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/logo.svg" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Getting started
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../getting-started/installation.html">
   Installation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Instruments
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/amor/amor.html">
   Amor
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/amor/amor_reduction.html">
     Divergent data reduction for Amor
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../instruments/amor/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.beamline.html">
       ess.amor.beamline
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
      <label for="toctree-checkbox-3">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.beamline.instrument_view_components.html">
         ess.amor.beamline.instrument_view_components
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.beamline.make_beamline.html">
         ess.amor.beamline.make_beamline
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.calibrations.html">
       ess.amor.calibrations
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
      <label for="toctree-checkbox-4">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.calibrations.calibration_factor.html">
         ess.amor.calibrations.calibration_factor
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.calibrations.supermirror_calibration.html">
         ess.amor.calibrations.supermirror_calibration
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.conversions.html">
       ess.amor.conversions
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
      <label for="toctree-checkbox-5">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.conversions.incident_beam.html">
         ess.amor.conversions.incident_beam
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.conversions.specular_reflection.html">
         ess.amor.conversions.specular_reflection
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.normalize.html">
       ess.amor.normalize
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
      <label for="toctree-checkbox-6">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.normalize.normalize_by_supermirror.html">
         ess.amor.normalize.normalize_by_supermirror
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.orso.html">
       ess.amor.orso
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.orso.make_orso.html">
         ess.amor.orso.make_orso
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.resolution.html">
       ess.amor.resolution
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
      <label for="toctree-checkbox-8">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.angular_resolution.html">
         ess.amor.resolution.angular_resolution
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.sample_size_resolution.html">
         ess.amor.resolution.sample_size_resolution
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.sigma_Q.html">
         ess.amor.resolution.sigma_Q
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.resolution.wavelength_resolution.html">
         ess.amor.resolution.wavelength_resolution
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../generated/ess.amor.tools.html">
       ess.amor.tools
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
      <label for="toctree-checkbox-9">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.fwhm_to_std.html">
         ess.amor.tools.fwhm_to_std
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.linlogspace.html">
         ess.amor.tools.linlogspace
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.amor.tools.std_to_fwhm.html">
         ess.amor.tools.std_to_fwhm
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.amor.instrument_view.instrument_view.html">
       ess.amor.instrument_view.instrument_view
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.amor.load.load.html">
       ess.amor.load.load
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/dream/dream.html">
   DREAM
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
  <label for="toctree-checkbox-10">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/dream/dream-instrument-view.html">
     DREAM instrument view
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/loki/loki.html">
   Loki
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/loki/sans2d_to_I_of_Q.html">
     SANS2D: I(Q) workflow for a single run (sample)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/loki/sans2d_reduction.html">
     SANS2D: I(Q) for sample and background
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../instruments/external/external.html">
   External Instruments
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../instruments/external/offspec/offspec_reduction.html">
     Collimated data reduction for OFFSPEC
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../instruments/external/powgen/powgen.html">
     POWGEN
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../instruments/external/powgen/powgen_reduction.html">
       Data reduction for POWGEN
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../../instruments/external/powgen/reference.html">
       Reference
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
      <label for="toctree-checkbox-14">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.external.powgen.beamline.html">
         ess.external.powgen.beamline
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Techniques
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../diffraction/diffraction.html">
   Diffraction
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../diffraction/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.normalize_by_monitor.html">
       ess.diffraction.normalize_by_monitor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.normalize_by_vanadium.html">
       ess.diffraction.normalize_by_vanadium
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.diffraction.lowpass.html">
       ess.diffraction.lowpass
      </a>
     </li>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="../diffraction/powder.html">
       Powder
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
      <label for="toctree-checkbox-17">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.conversions.dspacing_from_diff_calibration.html">
         ess.diffraction.powder.conversions.dspacing_from_diff_calibration
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.to_dspacing_with_calibration.html">
         ess.diffraction.powder.to_dspacing_with_calibration
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.diffraction.powder.merge_calibration.html">
         ess.diffraction.powder.merge_calibration
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../reflectometry/reflectometry.html">
   Reflectometry
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../reflectometry/reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
    <label for="toctree-checkbox-19">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.conversions.specular_reflection.html">
       ess.reflectometry.conversions.specular_reflection
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.footprint_correction.html">
       ess.reflectometry.corrections.footprint_correction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.normalize_by_counts.html">
       ess.reflectometry.corrections.normalize_by_counts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.corrections.beam_on_sample.html">
       ess.reflectometry.corrections.beam_on_sample
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.reflectometry.io.save_ort.html">
       ess.reflectometry.io.save_ort
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="sans.html">
   SANS
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Beam center finder
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="reference.html">
     Reference
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="i_of_q.html">
       I(Q) reduction workflow
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-22" name="toctree-checkbox-22" type="checkbox"/>
      <label for="toctree-checkbox-22">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.to_I_of_Q.html">
         ess.sans.i_of_q.to_I_of_Q
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.convert_to_q_and_merge_spectra.html">
         ess.sans.i_of_q.convert_to_q_and_merge_spectra
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.preprocess_monitor_data.html">
         ess.sans.i_of_q.preprocess_monitor_data
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="../../generated/ess.sans.i_of_q.resample_direct_beam.html">
         ess.sans.i_of_q.resample_direct_beam
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.beam_center.html">
       ess.sans.beam_center_finder.beam_center
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.center_of_mass.html">
       ess.sans.beam_center_finder.center_of_mass
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.cost.html">
       ess.sans.beam_center_finder.cost
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.iofq_in_quadrants.html">
       ess.sans.beam_center_finder.iofq_in_quadrants
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.beam_center_finder.minimize.html">
       ess.sans.beam_center_finder.minimize
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.conversions.sans_elastic.html">
       ess.sans.conversions.sans_elastic
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.conversions.sans_monitor.html">
       ess.sans.conversions.sans_monitor
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.solid_angle_of_rectangular_pixels.html">
       ess.sans.normalization.solid_angle_of_rectangular_pixels
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.transmission_fraction.html">
       ess.sans.normalization.transmission_fraction
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.iofq_denominator.html">
       ess.sans.normalization.iofq_denominator
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.normalization.normalize.html">
       ess.sans.normalization.normalize
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.common.gravity_vector.html">
       ess.sans.common.gravity_vector
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/ess.sans.common.mask_range.html">
       ess.sans.common.mask_range
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../wfm/wfm.html">
   Wavelength frame multiplication
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-23" name="toctree-checkbox-23" type="checkbox"/>
  <label for="toctree-checkbox-23">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../wfm/introduction-to-wfm.html">
     Introduction to Wavelength Frame Multiplication
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../wfm/reducing-wfm-data.html">
     Reducing WFM data
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Utilities
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../utilities/utilities.html">
   Modules
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-24" name="toctree-checkbox-24" type="checkbox"/>
  <label for="toctree-checkbox-24">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.logging.html">
     ess.logging
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-25" name="toctree-checkbox-25" type="checkbox"/>
    <label for="toctree-checkbox-25">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.configure.html">
       ess.logging.configure
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.configure_workflow.html">
       ess.logging.configure_workflow
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.default_loggers_to_configure.html">
       ess.logging.default_loggers_to_configure
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.get_logger.html">
       ess.logging.get_logger
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.greet.html">
       ess.logging.greet
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.log_call.html">
       ess.logging.log_call
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.logging.Formatter.html">
       ess.logging.Formatter
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.masking.html">
     ess.masking
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-26" name="toctree-checkbox-26" type="checkbox"/>
    <label for="toctree-checkbox-26">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.masking.save_detector_masks.html">
       ess.masking.save_detector_masks
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../../generated/modules/ess.uncertainty.html">
     ess.uncertainty
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-27" name="toctree-checkbox-27" type="checkbox"/>
    <label for="toctree-checkbox-27">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../../generated/modules/ess.uncertainty.variance_normalized_signal_over_monitor.html">
       ess.uncertainty.variance_normalized_signal_over_monitor
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Developer documentation
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../developer/style-guide.html">
   Style guide
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../developer/getting-started.html">
   Getting Started
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  About
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../about/release-notes.html">
   Release Notes
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        

















<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<div class="menu-dropdown">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="None">
<span class="headerbtn__text-container">Related projects</span>
<i class="fa fa-caret-down"></i>
  </button>
<div class="menu-dropdown__content" style="transform:translateX(0%)">
    <ul>
      <li>
        <a href="https://scipp.github.io"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scipp</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/plopp"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">plopp</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/scippnexus"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scippnexus</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/scippneutron"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">scippneutron</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">ess</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="None">
<span class="headerbtn__text-container">24.1.1.dev5+g8409fb3 (latest)</span>
<i class="fa fa-caret-down"></i>
  </button>
<div class="menu-dropdown__content" style="transform:translateX(0%)">
    <ul>
      <li>
        <a href="https://scipp.github.io/ess"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">24.1 (latest)</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.11"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.11</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.10"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.10</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.4"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.4</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/23.1"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">23.1</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.9"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.9</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.8"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.8</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.7"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.7</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.6"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.6</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.5"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.5</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.4"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.4</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.3"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.3</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.2"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.2</span>
</a>

      </li>
      
      <li>
        <a href="https://scipp.github.io/ess/release/0.1"
   class="headerbtn"
   
>
  

<span class="headerbtn__text-container">0.1</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">

<i class="fab fa-github"></i>
  </button>
<div class="menu-dropdown__content" >
    <ul>
      <li>
        <a href="https://github.com/scipp/ess"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/scipp/ess/issues/new?title=Issue%20on%20page%20%2Ftechniques/sans/sans-beam-center-finder.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/scipp/ess/edit/main/docs/techniques/sans/sans-beam-center-finder.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">

<i class="fas fa-download"></i>
  </button>
<div class="menu-dropdown__content" >
    <ul>
      <li>
        <a href="../../_sources/techniques/sans/sans-beam-center-finder.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Masking-bad-pixels">
   Masking bad pixels
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Description-of-the-procedure">
     Description of the procedure
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Initial-guess:-center-of-mass-calculation">
     Initial guess: center-of-mass calculation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Making-4-quadrants">
     Making 4 quadrants
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Converting-to-Q-inside-each-quadrant">
     Converting to
     <span class="math notranslate nohighlight">
      \(Q\)
     </span>
     inside each quadrant
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#First-compute-normalizing-term-to-avoid-loop-over-expensive-compute">
   First compute normalizing term to avoid loop over expensive compute
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Compute-I(Q)-inside-the-4-quadrants">
   Compute
   <span class="math notranslate nohighlight">
    \(I(Q)\)
   </span>
   inside the 4 quadrants
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Footnotes">
     Footnotes
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Beam center finder</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Masking-bad-pixels">
   Masking bad pixels
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Description-of-the-procedure">
     Description of the procedure
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Initial-guess:-center-of-mass-calculation">
     Initial guess: center-of-mass calculation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Making-4-quadrants">
     Making 4 quadrants
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Converting-to-Q-inside-each-quadrant">
     Converting to
     <span class="math notranslate nohighlight">
      \(Q\)
     </span>
     inside each quadrant
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#First-compute-normalizing-term-to-avoid-loop-over-expensive-compute">
   First compute normalizing term to avoid loop over expensive compute
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#Compute-I(Q)-inside-the-4-quadrants">
   Compute
   <span class="math notranslate nohighlight">
    \(I(Q)\)
   </span>
   inside the 4 quadrants
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#Footnotes">
     Footnotes
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="Beam-center-finder">
<h1>Beam center finder<a class="headerlink" href="#Beam-center-finder" title="Permalink to this headline">#</a></h1>
<p>In SANS experiments, it is essential to find the center of the scattering pattern in order to allow symmetric summation of the scattering intensity around the beam (i.e. computing a one-dimensional <span class="math notranslate nohighlight">\(I(Q)\)</span>). As detector panels can move, the center of the beam will not always be located at the same place on the detector panel from one experiment to the next.</p>
<p>Here we describe the beam center finding algorithm, which uses a combination of a center-of-mass calculation and an iterative refinement on a computed scattering cross-section to find the center of the scattering pattern.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">scipp</span> <span class="k">as</span> <span class="nn">sc</span>
<span class="kn">from</span> <span class="nn">scipp.constants</span> <span class="kn">import</span> <span class="n">g</span>
<span class="kn">from</span> <span class="nn">ess</span> <span class="kn">import</span> <span class="n">loki</span><span class="p">,</span> <span class="n">sans</span>
<span class="kn">from</span> <span class="nn">ess.sans</span> <span class="kn">import</span> <span class="n">beam_center_finder</span> <span class="k">as</span> <span class="n">bcf</span>
<span class="kn">from</span> <span class="nn">ess.logging</span> <span class="kn">import</span> <span class="n">configure_workflow</span>
<span class="kn">import</span> <span class="nn">plopp</span> <span class="k">as</span> <span class="nn">pp</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">logger</span> <span class="o">=</span> <span class="n">configure_workflow</span><span class="p">(</span><span class="s1">&#39;sans_beam_center_finder&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;sans.log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"version_major": 2, "version_minor": 0, "model_id": "973858047d3d4a16bd4dc3cbe2dee8db"}</script></div>
</div>
<p>We begin by setting some parameters relevant to the current sample.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Include effects of gravity?</span>
<span class="n">gravity</span> <span class="o">=</span> <span class="kc">True</span>

<span class="c1"># Wavelength binning</span>
<span class="n">wavelength_bins</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span>
    <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;wavelength&#39;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="mf">16.0</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">141</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;angstrom&#39;</span>
<span class="p">)</span>

<span class="c1"># Define Q binning</span>
<span class="n">q_bins</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mi">71</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;1/angstrom&#39;</span><span class="p">)</span>

<span class="c1"># Define coordinate transformation graph</span>
<span class="n">graph</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">conversions</span><span class="o">.</span><span class="n">sans_elastic</span><span class="p">(</span><span class="n">gravity</span><span class="o">=</span><span class="n">gravity</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Next we load the data files for the sample and direct runs:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sample</span> <span class="o">=</span> <span class="n">loki</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_sans2d</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">loki</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;SANS2D00063114.hdf5&#39;</span><span class="p">))</span>
<span class="n">direct</span> <span class="o">=</span> <span class="n">loki</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">load_sans2d</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">loki</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_path</span><span class="p">(</span><span class="s1">&#39;SANS2D00063091.hdf5&#39;</span><span class="p">))</span>
<span class="c1"># Add X, Y coordinates</span>
<span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">x</span>
<span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">y</span>
<span class="c1"># Add gravity coordinate</span>
<span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s2">&quot;gravity&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">vector</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="n">g</span>
</pre></div>
</div>
</div>
<section id="Masking-bad-pixels">
<h2>Masking bad pixels<a class="headerlink" href="#Masking-bad-pixels" title="Permalink to this headline">#</a></h2>
<p>We create a quick image of the data (summing along the <code class="docutils literal notranslate"><span class="pre">tof</span></code> dimension) to inspect its contents. We see a diffuse scattering pattern, centered around a dark patch with an arm to the north-east; this is the sample holder. It is clear that the sample and the beam are not in the center of the panel, which is marked by the red dot</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;tof&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_8_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_8_0.svg" /></div>
</div>
<p>To avoid skew in future comparisons of integrated intensities between the different regions of the detector panel, we mask out the sample holder, using a low-counts threshold. This also masks out the edges of the panel, which show visible artifacts. We also mask out a region in the bottom right corner where a group of hot pixels is apparent. Finally, there is a single hot pixel in the detector on the right edge of the panel with counts in excess of 1000, which we also remove.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">summed</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;tof&#39;</span><span class="p">)</span>

<span class="n">low_counts</span> <span class="o">=</span> <span class="n">summed</span><span class="o">.</span><span class="n">data</span> <span class="o">&lt;</span> <span class="n">sc</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="mi">70</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span>
<span class="n">high_counts</span> <span class="o">=</span> <span class="n">summed</span><span class="o">.</span><span class="n">data</span> <span class="o">&gt;</span> <span class="n">sc</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;counts&#39;</span><span class="p">)</span>
<span class="n">lower_right</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">sc</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="mf">0.35</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span>
    <span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">sc</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="o">-</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">sample</span><span class="o">.</span><span class="n">masks</span><span class="p">[</span><span class="s1">&#39;low_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">low_counts</span>
<span class="n">sample</span><span class="o">.</span><span class="n">masks</span><span class="p">[</span><span class="s1">&#39;high_counts&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">high_counts</span>
<span class="n">sample</span><span class="o">.</span><span class="n">masks</span><span class="p">[</span><span class="s1">&#39;lower_right&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lower_right</span>
</pre></div>
</div>
</div>
<p>We look at the image again, to verify we have masked the desired regions.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;tof&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_12_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_12_0.svg" /></div>
</div>
<section id="Description-of-the-procedure">
<h3>Description of the procedure<a class="headerlink" href="#Description-of-the-procedure" title="Permalink to this headline">#</a></h3>
<p>The procedure to determine the precise location of the beam center is the following:</p>
<ol class="arabic simple">
<li><p>obtain an initial guess by computing the center-of-mass of the pixels, weighted by the counts on each pixel</p></li>
<li><p>from that initial guess, divide the panel into 4 quadrants</p></li>
<li><p>compute <span class="math notranslate nohighlight">\(I(Q)\)</span> inside each quadrant and compute the residual difference between all 4 quadrants</p></li>
<li><p>iteratively move the centre position and repeat 2. and 3. until all 4 <span class="math notranslate nohighlight">\(I(Q)\)</span> curves lie on top of each other</p></li>
</ol>
</section>
<section id="Initial-guess:-center-of-mass-calculation">
<h3>Initial guess: center-of-mass calculation<a class="headerlink" href="#Initial-guess:-center-of-mass-calculation" title="Permalink to this headline">#</a></h3>
<p>Computing the center-of-mass is straightforward using the vector <code class="docutils literal notranslate"><span class="pre">position</span></code> coordinate.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">com</span> <span class="o">=</span> <span class="n">bcf</span><span class="o">.</span><span class="n">center_of_mass</span><span class="p">(</span><span class="n">sample</span><span class="p">)</span>

<span class="c1"># We compute the shift between the incident beam direction and the center-of-mass</span>
<span class="n">incident_beam</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">transform_coords</span><span class="p">(</span><span class="s1">&#39;incident_beam&#39;</span><span class="p">,</span> <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">)</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span>
    <span class="s1">&#39;incident_beam&#39;</span>
<span class="p">]</span>
<span class="n">n_beam</span> <span class="o">=</span> <span class="n">incident_beam</span> <span class="o">/</span> <span class="n">sc</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">incident_beam</span><span class="p">)</span>
<span class="n">com_shift</span> <span class="o">=</span> <span class="n">com</span> <span class="o">-</span> <span class="n">sc</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">com</span><span class="p">,</span> <span class="n">n_beam</span><span class="p">)</span> <span class="o">*</span> <span class="n">n_beam</span>
<span class="n">com_shift</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.Variable (336 Bytes)</div></div><ul class='sc-sections'><li class='sc-section-item'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-standalone-var-name'><span>()</span></div><div class='sc-var-dtype'>vector3</div><div class='sc-var-unit'>m</div><div class='sc-value-preview sc-preview'><span><div>[ 0.0642058  -0.05088138  0.        ]</div></span></div><input id='attrs-cc3212f1-4f9c-4dbd-8071-2d70b29262d1' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-cc3212f1-4f9c-4dbd-8071-2d70b29262d1' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-dd8bf6d9-fe65-4779-af77-b983b1f66687' class='sc-var-data-in' type='checkbox'><label for='data-dd8bf6d9-fe65-4779-af77-b983b1f66687' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 0.0642058 , -0.05088138,  0.        ])</pre></li></ul></li></ul></div></div></div>
</div>
<p>We can now plot the center-of-mass on the same image as before:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">xc</span> <span class="o">=</span> <span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">x</span>
<span class="n">yc</span> <span class="o">=</span> <span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">y</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_16_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_16_0.svg" /></div>
</div>
</section>
<section id="Making-4-quadrants">
<h3>Making 4 quadrants<a class="headerlink" href="#Making-4-quadrants" title="Permalink to this headline">#</a></h3>
<p>We divide the panel into 4 quadrants.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">yc</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>
<span class="n">dx</span> <span class="o">=</span> <span class="mf">0.25</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="s1">&#39;North-East&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">dx</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="s1">&#39;North-West&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">dx</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">dx</span><span class="p">,</span> <span class="s1">&#39;South-East&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">xc</span><span class="o">.</span><span class="n">value</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span> <span class="n">yc</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="n">dx</span><span class="p">,</span> <span class="s1">&#39;South-West&#39;</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_18_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_18_0.svg" /></div>
</div>
</section>
<section id="Converting-to-Q-inside-each-quadrant">
<h3>Converting to <span class="math notranslate nohighlight">\(Q\)</span> inside each quadrant<a class="headerlink" href="#Converting-to-Q-inside-each-quadrant" title="Permalink to this headline">#</a></h3>
<p>We now perform a full<cite>:math:`^1</cite> &lt;#footnote1&gt;`__ <span class="math notranslate nohighlight">\(I(Q)\)</span> reduction (see <a class="reference internal" href="../../instruments/loki/sans2d_to_I_of_Q.html"><span class="doc">here</span></a> for more details) inside each quadrant. The reduction involves computing a normalizing term which, for the most part, does not depend on pixel positions. We therefore compute this once, before starting iterations to refine the position of the center.</p>
</section>
</section>
<section id="First-compute-normalizing-term-to-avoid-loop-over-expensive-compute">
<h2>First compute normalizing term to avoid loop over expensive compute<a class="headerlink" href="#First-compute-normalizing-term-to-avoid-loop-over-expensive-compute" title="Permalink to this headline">#</a></h2>
<p>To compute the denominator, we need to preprocess the monitor data from the sample and direct runs. This involved converting them to wavelength and removing any background noise from the signal.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract monitor data</span>
<span class="n">sample_monitors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;incident&#39;</span><span class="p">:</span> <span class="n">sample</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;monitor2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="s1">&#39;transmission&#39;</span><span class="p">:</span> <span class="n">sample</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;monitor4&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">direct_monitors</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;incident&#39;</span><span class="p">:</span> <span class="n">direct</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;monitor2&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
    <span class="s1">&#39;transmission&#39;</span><span class="p">:</span> <span class="n">direct</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s2">&quot;monitor4&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
<span class="p">}</span>
<span class="c1"># Define the range where monitor data is considered not to be noise</span>
<span class="n">non_background_range</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
    <span class="n">dims</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;wavelength&#39;</span><span class="p">],</span> <span class="n">values</span><span class="o">=</span><span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">17.1</span><span class="p">],</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;angstrom&#39;</span>
<span class="p">)</span>
<span class="c1"># Pre-process monitor data</span>
<span class="n">sample_monitors</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">i_of_q</span><span class="o">.</span><span class="n">preprocess_monitor_data</span><span class="p">(</span>
    <span class="n">sample_monitors</span><span class="p">,</span>
    <span class="n">non_background_range</span><span class="o">=</span><span class="n">non_background_range</span><span class="p">,</span>
    <span class="n">wavelength_bins</span><span class="o">=</span><span class="n">wavelength_bins</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">direct_monitors</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">i_of_q</span><span class="o">.</span><span class="n">preprocess_monitor_data</span><span class="p">(</span>
    <span class="n">direct_monitors</span><span class="p">,</span>
    <span class="n">non_background_range</span><span class="o">=</span><span class="n">non_background_range</span><span class="p">,</span>
    <span class="n">wavelength_bins</span><span class="o">=</span><span class="n">wavelength_bins</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>We then feed this, along with the sample run data (needed to include the detector pixel solid angles), to a function which will compute the normalization term.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">norm</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">normalization</span><span class="o">.</span><span class="n">iofq_denominator</span><span class="p">(</span>
    <span class="n">data</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
    <span class="n">data_transmission_monitor</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">sample_monitors</span><span class="p">[</span><span class="s1">&#39;transmission&#39;</span><span class="p">]),</span>
    <span class="n">direct_incident_monitor</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">direct_monitors</span><span class="p">[</span><span class="s1">&#39;incident&#39;</span><span class="p">]),</span>
    <span class="n">direct_transmission_monitor</span><span class="o">=</span><span class="n">sc</span><span class="o">.</span><span class="n">values</span><span class="p">(</span><span class="n">direct_monitors</span><span class="p">[</span><span class="s1">&#39;transmission&#39;</span><span class="p">]),</span>
<span class="p">)</span>

<span class="n">norm</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><!-- Original source from -->
<!-- https://github.com/jsignell/xarray/blob/1d960933ab252e0f79f7e050e6c9261d55568057/xarray/static/html/icons-svg-inline.html -->
<svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg><style id="scipp-style-sheet">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'▼';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style><div class='sc-wrap sc-root'><div class='sc-header'><div class='sc-obj-type'>scipp.DataArray (65.80 MB)</div></div><ul class='sc-sections'><li class='sc-section-item'><input id='section-5754d8e3-ab1b-4dc7-901b-d2e4ebe4e06a' class='sc-section-summary-in' type='checkbox' disabled ><label for='section-5754d8e3-ab1b-4dc7-901b-d2e4ebe4e06a' class='sc-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='sc-section-inline-details'><ul class='sc-dim-list'><li><span>spectrum</span>: 61440</li><li><span class='sc-has-index'>wavelength</span>: 140</li></ul></div><div class='sc-section-details'></div></li><li class='sc-section-item'><input id='section-703d266e-a360-44f1-b3ff-08f90a629b12' class='sc-section-summary-in' type='checkbox'  checked><label for='section-703d266e-a360-44f1-b3ff-08f90a629b12' class='sc-section-summary' >Coordinates: <span>(1)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span class='sc-aligned'>wavelength</span></div><div class='sc-var-dims'>(wavelength)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>Å</div><div class='sc-value-preview sc-preview'><span><div>2.05, 2.150, ..., 15.850, 15.95</div></span></div><input id='attrs-888470dd-4a14-4350-b86f-8e18da688d68' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-888470dd-4a14-4350-b86f-8e18da688d68' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7e59a9b0-f99f-4219-9150-c55fc06b842e' class='sc-var-data-in' type='checkbox'><label for='data-7e59a9b0-f99f-4219-9150-c55fc06b842e' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ 2.05,  2.15,  2.25,  2.35,  2.45,  2.55,  2.65,  2.75,  2.85,
        2.95,  3.05,  3.15,  3.25,  3.35,  3.45,  3.55,  3.65,  3.75,
        3.85,  3.95,  4.05,  4.15,  4.25,  4.35,  4.45,  4.55,  4.65,
        4.75,  4.85,  4.95,  5.05,  5.15,  5.25,  5.35,  5.45,  5.55,
        5.65,  5.75,  5.85,  5.95,  6.05,  6.15,  6.25,  6.35,  6.45,
        6.55,  6.65,  6.75,  6.85,  6.95,  7.05,  7.15,  7.25,  7.35,
        7.45,  7.55,  7.65,  7.75,  7.85,  7.95,  8.05,  8.15,  8.25,
        8.35,  8.45,  8.55,  8.65,  8.75,  8.85,  8.95,  9.05,  9.15,
        9.25,  9.35,  9.45,  9.55,  9.65,  9.75,  9.85,  9.95, 10.05,
       10.15, 10.25, 10.35, 10.45, 10.55, 10.65, 10.75, 10.85, 10.95,
       11.05, 11.15, 11.25, 11.35, 11.45, 11.55, 11.65, 11.75, 11.85,
       11.95, 12.05, 12.15, 12.25, 12.35, 12.45, 12.55, 12.65, 12.75,
       12.85, 12.95, 13.05, 13.15, 13.25, 13.35, 13.45, 13.55, 13.65,
       13.75, 13.85, 13.95, 14.05, 14.15, 14.25, 14.35, 14.45, 14.55,
       14.65, 14.75, 14.85, 14.95, 15.05, 15.15, 15.25, 15.35, 15.45,
       15.55, 15.65, 15.75, 15.85, 15.95])</pre></span></li></ul></div></li><li class='sc-section-item'><input id='section-eb88ca45-6901-4bec-8801-adb467b72c80' class='sc-section-summary-in' type='checkbox'  checked><label for='section-eb88ca45-6901-4bec-8801-adb467b72c80' class='sc-section-summary' >Data: <span>(1)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span></span></div><div class='sc-var-dims'>(spectrum, wavelength)</div><div class='sc-var-dtype'>float64</div><div class='sc-var-unit'>counts</div><div class='sc-value-preview sc-preview'><span><div>0.075, 0.094, ..., 0.001, 0.001</div></span></div><input id='attrs-119bf052-2ea9-4212-bd1d-4da922238df2' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-119bf052-2ea9-4212-bd1d-4da922238df2' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3c544e3e-8d72-47b5-982a-7ee6ea1f22f4' class='sc-var-data-in' type='checkbox'><label for='data-3c544e3e-8d72-47b5-982a-7ee6ea1f22f4' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([[0.07465485, 0.09399527, 0.1167066 , ..., 0.00128523, 0.00123268,
        0.00125358],
       [0.07466466, 0.09400762, 0.11672193, ..., 0.0012854 , 0.00123285,
        0.00125375],
       [0.07467443, 0.09401992, 0.11673721, ..., 0.00128557, 0.00123301,
        0.00125391],
       ...,
       [0.07466547, 0.09400864, 0.11672321, ..., 0.00128542, 0.00123286,
        0.00125376],
       [0.07465571, 0.09399635, 0.11670794, ..., 0.00128525, 0.0012327 ,
        0.0012536 ],
       [0.0746459 , 0.093984  , 0.11669261, ..., 0.00128508, 0.00123254,
        0.00125343]])</pre></li></ul></div></li><li class='sc-section-item'><input id='section-0229a94e-c6b8-4484-8401-cf7d87af539b' class='sc-section-summary-in' type='checkbox'  checked><label for='section-0229a94e-c6b8-4484-8401-cf7d87af539b' class='sc-section-summary' >Masks: <span>(3)</span></label><div class='sc-section-inline-details'></div><div class='sc-section-details'><ul class='sc-var-list'><li class='sc-var-item'><div class='sc-var-name'><span>high_counts</span></div><div class='sc-var-dims'>(spectrum)</div><div class='sc-var-dtype'>bool</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>False, False, ..., False, False</div></span></div><input id='attrs-a8fcb739-15e2-44c0-a754-fc40151029c8' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-a8fcb739-15e2-44c0-a754-fc40151029c8' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ed3c0789-7f3e-4245-b7fe-1c6620af06bd' class='sc-var-data-in' type='checkbox'><label for='data-ed3c0789-7f3e-4245-b7fe-1c6620af06bd' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([False, False, False, ..., False, False, False])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span>low_counts</span></div><div class='sc-var-dims'>(spectrum)</div><div class='sc-var-dtype'>bool</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>True, True, ..., True, True</div></span></div><input id='attrs-40ee54c5-5aa2-42d5-a44b-999d85676ba0' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-40ee54c5-5aa2-42d5-a44b-999d85676ba0' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-773e6fbd-85d9-4aa8-88fd-ad3f83d3e0b8' class='sc-var-data-in' type='checkbox'><label for='data-773e6fbd-85d9-4aa8-88fd-ad3f83d3e0b8' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([ True,  True,  True, ...,  True,  True,  True])</pre></span></li><li class='sc-var-item'><div class='sc-var-name'><span>lower_right</span></div><div class='sc-var-dims'>(spectrum)</div><div class='sc-var-dtype'>bool</div><div class='sc-var-unit'></div><div class='sc-value-preview sc-preview'><span><div>False, False, ..., False, False</div></span></div><input id='attrs-8f8af328-4a1f-4f71-978e-f33824ab9bb5' class='sc-var-attrs-in' type='checkbox' disabled><label for='attrs-8f8af328-4a1f-4f71-978e-f33824ab9bb5' class='sc-hide-icon' title='Show/Hide attributes'><svg class='icon sc-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b18744ad-8c1f-422c-8a02-432e3a8afa24' class='sc-var-data-in' type='checkbox'><label for='data-b18744ad-8c1f-422c-8a02-432e3a8afa24' title='Show/Hide data repr'><svg class='icon sc-icon-database'><use xlink:href='#icon-database'></use></svg></label><pre class='sc-var-data'>Values:<br>array([False, False, False, ..., False, False, False])</pre></span></li></ul></div></li></ul></div></div></div>
</div>
</section>
<section id="Compute-I(Q)-inside-the-4-quadrants">
<h2>Compute <span class="math notranslate nohighlight">\(I(Q)\)</span> inside the 4 quadrants<a class="headerlink" href="#Compute-I(Q)-inside-the-4-quadrants" title="Permalink to this headline">#</a></h2>
<p>We begin by defining several parameters which are required to compute <span class="math notranslate nohighlight">\(I(Q)\)</span>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define 4 phi bins</span>
<span class="n">pi</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">pi</span><span class="o">.</span><span class="n">value</span>
<span class="n">phi_bins</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="s1">&#39;phi&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">pi</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;rad&#39;</span><span class="p">)</span>

<span class="c1"># Name the quadrants</span>
<span class="n">quadrants</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;south-west&#39;</span><span class="p">,</span> <span class="s1">&#39;south-east&#39;</span><span class="p">,</span> <span class="s1">&#39;north-east&#39;</span><span class="p">,</span> <span class="s1">&#39;north-west&#39;</span><span class="p">]</span>

<span class="c1"># Define a wavelength range to use</span>
<span class="n">wavelength_range</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span>
    <span class="p">[</span><span class="n">wavelength_bins</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">wavelength_bins</span><span class="o">.</span><span class="n">max</span><span class="p">()],</span> <span class="n">dim</span><span class="o">=</span><span class="s1">&#39;wavelength&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>We now use a function which will apply the center offset to the pixel coordinates, and compute <span class="math notranslate nohighlight">\(I(Q)\)</span> inside each quadrant.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">beam_center_finder</span><span class="o">.</span><span class="n">iofq_in_quadrants</span><span class="p">(</span>
    <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
    <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
    <span class="n">q_bins</span><span class="o">=</span><span class="n">q_bins</span><span class="p">,</span>
    <span class="n">gravity</span><span class="o">=</span><span class="n">gravity</span><span class="p">,</span>
    <span class="n">wavelength_range</span><span class="o">=</span><span class="n">wavelength_range</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p>We can now plot on the same figure all 4 <span class="math notranslate nohighlight">\(I(Q)\)</span> curves for each quadrant.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grouped</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_28_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_28_0.svg" /></div>
</div>
<p>As we can see, the overlap between the curves from the 4 quadrants is not satisfactory. We will now use an iterative procedure to improve our initial guess, until a good overlap between the curves is found.</p>
<p>For this, we first define a cost function <code class="docutils literal notranslate"><span class="pre">sans.beam_center_finder.cost</span></code>, which gives us an idea of how good the overlap is:</p>
<div class="math notranslate nohighlight">
\[\text{cost} = \frac{\sum_{Q}\sum_{i=1}^{i=4} \overline{I}(Q)\left(I(Q)_{i} - \overline{I}(Q)\right)^2}{\sum_{Q}\overline{I}(Q)} ~,\]</div>
<p>where <span class="math notranslate nohighlight">\(\overline{I}(Q)\)</span> is the mean intensity of the 4 quadrants (represented by <span class="math notranslate nohighlight">\(i\)</span>) as a function of <span class="math notranslate nohighlight">\(Q\)</span>. This is basically a weighted mean of the square of the differences between the <span class="math notranslate nohighlight">\(I(Q)\)</span> curves in the 4 quadrants with respect to <span class="math notranslate nohighlight">\(\overline{I}(Q)\)</span>, and where the weights are <span class="math notranslate nohighlight">\(\overline{I}(Q)\)</span>.</p>
<p>Next, we iteratively minimize the computed cost (this is using Scipy’s <code class="docutils literal notranslate"><span class="pre">optimize.minimize</span></code> utility internally; see <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.minimize.html">here</a> for more details).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># The minimizer works best if given bounds, which are the bounds of our detector panel</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">x</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;position&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">y</span>

<span class="n">res</span> <span class="o">=</span> <span class="n">bcf</span><span class="o">.</span><span class="n">minimize</span><span class="p">(</span>
    <span class="n">sans</span><span class="o">.</span><span class="n">beam_center_finder</span><span class="o">.</span><span class="n">cost</span><span class="p">,</span>
    <span class="n">x0</span><span class="o">=</span><span class="p">[</span><span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">com_shift</span><span class="o">.</span><span class="n">fields</span><span class="o">.</span><span class="n">y</span><span class="o">.</span><span class="n">value</span><span class="p">],</span>
    <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">sample</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span> <span class="n">graph</span><span class="p">,</span> <span class="n">q_bins</span><span class="p">,</span> <span class="n">gravity</span><span class="p">,</span> <span class="n">wavelength_range</span><span class="p">),</span>
    <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="n">x</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">),</span> <span class="p">(</span><span class="n">y</span><span class="o">.</span><span class="n">min</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">y</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">value</span><span class="p">)],</span>
<span class="p">)</span>
<span class="n">res</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
       message: Optimization terminated successfully.
       success: True
        status: 0
           fun: 0.9083893895149231
             x: [ 9.330e-02 -8.079e-02]
           nit: 20
          nfev: 37
 final_simplex: (array([[ 9.330e-02, -8.079e-02],
                       [ 9.347e-02, -8.129e-02],
                       [ 9.242e-02, -8.121e-02]]), array([ 9.084e-01,  9.100e-01,  9.882e-01]))
</pre></div></div>
</div>
<p>Once the iterations completed, the returned object contains the best estimate for the beam center:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">res</span><span class="o">.</span><span class="n">x</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([ 0.09329701, -0.08079138])
</pre></div></div>
</div>
<p>We can now feed this value again into our <code class="docutils literal notranslate"><span class="pre">iofq_in_quadrants</span></code> function, to inspect the <span class="math notranslate nohighlight">\(Q\)</span> intensity in all 4 quadrants:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grouped</span> <span class="o">=</span> <span class="n">sans</span><span class="o">.</span><span class="n">beam_center_finder</span><span class="o">.</span><span class="n">iofq_in_quadrants</span><span class="p">(</span>
    <span class="n">xy</span><span class="o">=</span><span class="p">[</span><span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span>
    <span class="n">sample</span><span class="o">=</span><span class="n">sample</span><span class="p">,</span>
    <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span>
    <span class="n">graph</span><span class="o">=</span><span class="n">graph</span><span class="p">,</span>
    <span class="n">q_bins</span><span class="o">=</span><span class="n">q_bins</span><span class="p">,</span>
    <span class="n">gravity</span><span class="o">=</span><span class="n">gravity</span><span class="p">,</span>
    <span class="n">wavelength_range</span><span class="o">=</span><span class="n">wavelength_range</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">pp</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">grouped</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_34_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_34_0.svg" /></div>
</div>
<p>The overlap between the curves is excellent, allowing us to safely perform an azimuthal summation of the counts around the beam center.</p>
<p>As a consistency check, we plot the refined beam center position onto the detector panel image:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">sample</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="s1">&#39;tof&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">120</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">norm</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">res</span><span class="o">.</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">p</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/techniques_sans_sans-beam-center-finder_36_0.svg" src="../../_images/techniques_sans_sans-beam-center-finder_36_0.svg" /></div>
</div>
<section id="Footnotes">
<h3>Footnotes<a class="headerlink" href="#Footnotes" title="Permalink to this headline">#</a></h3>
<div id="footnote1"></div><ol class="arabic simple">
<li><p>In the full <span class="math notranslate nohighlight">\(I(Q)\)</span> reduction, there is a term <span class="math notranslate nohighlight">\(D(\lambda)\)</span> in the normalization called the “direct beam” which gives the efficiency of the detectors as a function of wavelength. Because finding the beam center is required to compute the direct beam in the first place, we do not include this term in the computation of <span class="math notranslate nohighlight">\(I(Q)\)</span> for finding the beam center. This changes the shape of the <span class="math notranslate nohighlight">\(I(Q)\)</span> curve, but since it changes it in the same manner for all <span class="math notranslate nohighlight">\(\phi\)</span> angles,
this does not affect the results for finding the beam center.</p></li>
</ol>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"4bcfcd24016e4855b37bd5a8f2b79d15": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8edd0e98b60a4ab48d86666dd020f31d": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "2d582256f7b34ee88d53d8c503bf5777": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_4bcfcd24016e4855b37bd5a8f2b79d15", "placeholder": "\u200b", "style": "IPY_MODEL_8edd0e98b60a4ab48d86666dd020f31d", "tabbable": null, "tooltip": null, "value": "<div class=\"sc-log\"><table class=\"sc-log\"><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:02]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Software Versions:\n  ess: 24.1.1.dev5+g8409fb3 (https://scipp.github.io/ess)\n  scippneutron: 23.9.0 (https://scipp.github.io/scippneutron)\n  scipp: 23.08.0 (https://scipp.github.io)</td><td class=\"sc-log-name\">&lt;scipp.ess&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:04]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (sample_position, source_position) -&gt; (incident_beam)\n  Steps:\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (position, source_position, tof) -&gt; (wavelength)\n  Byproducts:\n    Ltotal\n  Renamed dimensions:\n    wavelength &lt;- tof\n  Steps:\n    Compute (Ltotal) = total_straight_beam_length_no_scatter(source_position, position)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (position, source_position, tof) -&gt; (wavelength)\n  Byproducts:\n    Ltotal\n  Renamed dimensions:\n    wavelength &lt;- tof\n  Steps:\n    Compute (Ltotal) = total_straight_beam_length_no_scatter(source_position, position)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (position, source_position, tof) -&gt; (wavelength)\n  Byproducts:\n    Ltotal\n  Renamed dimensions:\n    wavelength &lt;- tof\n  Steps:\n    Compute (Ltotal) = total_straight_beam_length_no_scatter(source_position, position)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (position, source_position, tof) -&gt; (wavelength)\n  Byproducts:\n    Ltotal\n  Renamed dimensions:\n    wavelength &lt;- tof\n  Steps:\n    Compute (Ltotal) = total_straight_beam_length_no_scatter(source_position, position)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (position, sample_position) -&gt; (L2)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (L2) = L2(scattered_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:05]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:06]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.06420580109727972, y=-0.05088138322535756, cost=318.6180725097656</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.06741609115214371, y=-0.05088138322535756, cost=296.4114074707031</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:07]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.06420580109727972, y=-0.05342545238662544, cost=303.94720458984375</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.06741609115214373, y=-0.053425452386625445, cost=280.6508483886719</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:08]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.06902123617957573, y=-0.05469748696725939, cost=259.5623474121094</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.07223152623443971, y=-0.0521534178059915, cost=258.5091857910156</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:09]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.0762443888030197, y=-0.05151740051567455, cost=236.86402893066406</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.07784953383045172, y=-0.055333504257576376, cost=196.9615478515625</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:10]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08306625516960572, y=-0.057559564773685776, cost=151.10060119628906</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:11]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.0902894077930497, y=-0.05437947832210094, cost=162.37327575683594</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09711127415963572, y=-0.060421642580112164, cost=107.58200073242188</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:12]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.10754471683794375, y=-0.06487376361233096, cost=114.45596313476562</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08988812153619175, y=-0.063601729031697, cost=79.99102783203125</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:13]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08968747840776276, y=-0.06821285438649505, cost=48.4610595703125</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.10373249739779275, y=-0.07107493219292145, cost=57.297767639160156</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:14]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09630870164591979, y=-0.07886614399930432, cost=5.0809502601623535</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:15]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09590741538906183, y=-0.0880883947089004, cost=15.140969276428223</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08226368265588979, y=-0.0760040661928779, cost=41.14994812011719</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:16]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08888490589404682, y=-0.08665735580568718, cost=13.866445541381836</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.10292992488407682, y=-0.08951943361211358, cost=44.296958923339844</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:17]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.08743024321293655, y=-0.07938290804768683, cost=11.326691627502441</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09485403896480951, y=-0.07159169624130396, cost=26.054786682128906</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:18]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.0903771891617375, y=-0.08289094091459137, cost=4.046141147613525</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09925564759472075, y=-0.08237417686620885, cost=11.653304100036621</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:19]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.0903865943083826, y=-0.08013072525231733, cost=3.458303451538086</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:20]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.0844550818242003, y=-0.0841555221676044, cost=24.45689582824707</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09334529669048991, y=-0.08018848854137933, cost=1.141068696975708</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:21]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.093354701837135, y=-0.07742827287910531, cost=4.753288745880127</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09112156733058688, y=-0.08152527390571986, cost=2.158268451690674</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:22]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09408026971269419, y=-0.08158303719478184, cost=1.0532662868499756</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09592710741484997, y=-0.0823091931660141, cost=3.3432374000549316</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:23]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09630399907259721, y=-0.0802462518304413, cost=3.7874796390533447</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:24]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09241717526608946, y=-0.08120551838690021, cost=0.9881794452667236</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09315214828829374, y=-0.0826000670403027, cost=1.4188283681869507</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:25]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09329700958994086, y=-0.08079138316611018, cost=0.9083893895149231</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09163391514333612, y=-0.08041386435822855, cost=1.6992933750152588</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:26]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Beam center finder: x=0.09346868107035466, y=-0.08129074398564351, cost=0.9100221991539001</td><td class=\"sc-log-name\">&lt;scipp.ess.sans&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, sample_position, source_position) -&gt; (cyl_x_unit_vector, cyl_y_unit_vector)\n  Byproducts:\n    incident_beam\n  Steps:\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position) -&gt; (phi)\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (cyl_y_unit_vector) = cyl_y_unit_vector(gravity)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (cylindrical_y) = cylindrical_y(cyl_y_unit_vector, scattered_beam)\n    Compute (cyl_x_unit_vector) = cyl_x_unit_vector(gravity, incident_beam)\n    Compute (cylindrical_x) = cylindrical_x(cyl_x_unit_vector, scattered_beam)\n    Compute (phi) = phi(cylindrical_x, cylindrical_y)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, tof) -&gt; (Q)\n  Byproducts:\n    L1, L2, Ltotal, incident_beam, scattered_beam, two_theta, wavelength\n  Renamed dimensions:\n    Q &lt;- tof\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (L2) = L2(scattered_beam)\n    Compute (L1) = L1(incident_beam)\n    Compute (Ltotal) = total_beam_length(L1, L2)\n    Compute (wavelength) = wavelength_from_tof(tof, Ltotal)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr><tr class=\"sc-log sc-log-info\"><td class=\"sc-log-time-stamp\">[2024-04-03T11:20:27]</td><td class=\"sc-log-level\">INFO</td><td class=\"sc-log-message\">Transformed coords (gravity, position, sample_position, source_position, wavelength) -&gt; (Q)\n  Byproducts:\n    incident_beam, scattered_beam, two_theta\n  Renamed dimensions:\n    Q &lt;- wavelength\n  Steps:\n    Compute (scattered_beam) = straight_scattered_beam(position, sample_position)\n    Compute (incident_beam) = straight_incident_beam(source_position, sample_position)\n    Compute (two_theta) = two_theta(incident_beam, scattered_beam, wavelength, gravity)\n    Compute (Q) = Q_from_wavelength(wavelength, two_theta)</td><td class=\"sc-log-name\">&lt;scipp&gt;</td></tr></table></div>"}}, "8dbcc504b7434fe698475ba04e3826ce": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8e6ca8c76c1b42ffb7efd57109f747fc": {"model_name": "HTMLStyleModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "StyleView", "background": null, "description_width": "", "font_size": null, "text_color": null}}, "2017c312c2964b0eb5ab8c581943be68": {"model_name": "HTMLModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "HTMLView", "description": "", "description_allow_html": false, "layout": "IPY_MODEL_8dbcc504b7434fe698475ba04e3826ce", "placeholder": "\u200b", "style": "IPY_MODEL_8e6ca8c76c1b42ffb7efd57109f747fc", "tabbable": null, "tooltip": null, "value": "<style id=\"scipp-style-sheet\">.sc-root{--sc-background-color0:var(--jp-layout-color0,#fff);--sc-background-color1:var(--jp-layout-color1,#fcfcfc);--sc-background-color2:var(--jp-layout-color2,#efefef);--sc-inverse-background-color0:var(--jp-inverse-layout-color4,#111);--sc-font-color0:var(--jp-content-font-color0,#000);--sc-font-color1:var(--jp-content-font-color1,#555);--sc-font-color2:var(--jp-content-font-color2,#888);--sc-font-color3:var(--jp-content-font-color3,#ccc);--sc-table-data-color:#f6d028;--sc-table-coords-color:#c6e590;--sc-table-masks-color:#c8c8c8;--sc-table-attrs-color:#ff5555;--sc-table-header-font-color:#111111;}.sc-wrap{font-size:14px;min-width:300px;max-width:800px;}.sc-var-attrs .sc-wrap{padding-left:3em;}.sc-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px #ddd;}.sc-header > div,.sc-header > ul{display:inline;margin-top:0;margin-bottom:0;}.sc-obj-type,.sc-array-name{margin-left:2px;margin-right:10px;}.sc-obj-type{color:var(--sc-font-color1);}.sc-underlying-size{color:var(--sc-font-color2);}.sc-sections,.reveal .sc-sections{padding-left:0 !important;display:grid;grid-template-columns:150px auto auto auto 1fr 20px 20px;}.sc-section-item{display:contents;}.sc-section-item input{display:none;}.sc-section-item input:enabled + label{cursor:pointer;color:var(--sc-font-color1);}.sc-section-item input:enabled + label:hover{color:var(--sc-font-color0);}.sc-section-summary{grid-column:1;font-weight:500;}.sc-section-summary > span{display:inline-block;padding-left:0.5em;}.sc-section-summary-in:disabled + label{color:var(--sc-font-color1);}.sc-section-summary-in + label:before{display:inline-block;content:'\u25ba';font-size:11px;width:15px;text-align:center;}.sc-section-summary-in:disabled + label:before{color:var(--sc-font-color3);}.sc-section-summary-in:checked + label:before{content:'\u25bc';}.sc-section-summary-in:checked + label > span{display:none;}.sc-section-summary,.sc-section-inline-details{padding-top:4px;padding-bottom:4px;}.sc-section-inline-details{grid-column:2 / 6;}.sc-section-details{display:none;grid-column:1 / -1;margin-bottom:5px;}.sc-section-summary-in:checked ~ .sc-section-details{display:contents;}.sc-array-wrap{grid-column:1 / -1;display:grid;grid-template-columns:20px auto;}.sc-array-wrap > label{grid-column:1;vertical-align:top;}.sc-preview{color:var(--sc-font-color2);}.sc-array-preview,.sc-array-data{padding:0 5px !important;grid-column:2;}.sc-array-data,.sc-array-in:checked ~ .sc-array-preview{display:none;}.sc-array-in:checked ~ .sc-array-data,.sc-array-preview{display:inline-block;}.sc-dim-list{display:inline-block !important;list-style:none;padding:0 !important;margin:0;}.sc-dim-list li{display:inline-block;padding:0;margin:0!important;}.sc-dim-list:before{content:'(';}.sc-dim-list:after{content:')';}.sc-dim-list li:not(:last-child):after{content:',';padding-right:5px;}.sc-dim-list li span,.sc-standalone-var-name > span span,.sc-var-name > span span{padding:0 !important;}.sc-aligned{font-weight:bold;}.sc-var-list,.sc-var-item,.reveal .sc-var-list,.reveal .sc-var-item{display:contents;}.sc-var-item > div,.sc-var-item label,.sc-var-item > .sc-var-name span{background-color:var(--sc-background-color1);margin-bottom:0;}.sc-var-item > .sc-var-name:hover span{padding-right:5px;}.sc-var-list > li:nth-child(odd) > div,.sc-var-list > li:nth-child(odd) > label,.sc-var-list > li:nth-child(odd) > .sc-var-name span{background-color:var(--sc-background-color2);}.sc-var-name{grid-column:1;}.sc-var-dims{grid-column:2;}.sc-var-dtype{grid-column:3;text-align:right;color:var(--sc-font-color2);}.sc-var-unit{grid-column:4;text-align:left;color:var(--sc-font-color1);max-width:50pt;text-overflow:ellipsis;}.sc-value-preview{grid-column:5;}.sc-var-preview-variances{text-align:right;}.sc-sections .sc-section-item .sc-section-summary,.sc-sections .sc-section-item .sc-section-inline-details,.sc-section-item .sc-var-list .sc-var-item > div,.sc-section-item .sc-var-list .sc-var-item > label,.sc-section-details .sc-var-list .sc-var-item > div,.sc-section-details .sc-var-list .sc-var-item > label{margin-top:0;margin-bottom:0;}.sc-var-name,.sc-var-dims,.sc-var-dtype,.sc-var-unit,.sc-preview,.sc-attrs dt{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px;}.sc-var-name:hover,.sc-var-dims:hover,.sc-var-dtype:hover,.sc-var-unit:hover,.sc-attrs dt:hover{overflow:visible;width:auto;z-index:1;}.sc-var-attrs{display:block;}.sc-var-data,.reveal .sc-var-data{display:none;}.sc-var-attrs,.sc-var-data{background-color:var(--sc-background-color0) !important;padding-bottom:5px !important;}.sc-var-attrs-in:checked ~ .sc-var-attrs{display:none;}.sc-var-data-in:checked ~ .sc-var-data{display:block;}.sc-var-data > table{float:right;}.sc-var-name span,.sc-var-data{padding-left:25px !important;}.sc-var-attrs,.sc-var-data{grid-column:1 / -1;}dl.sc-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto;}.sc-attrs dt,dd{padding:0;margin:0;float:left;padding-right:10px;width:auto;}.sc-attrs dt{font-weight:normal;grid-column:1;}.sc-attrs dt:hover span{display:inline-block;padding-right:10px;}.sc-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all;}.sc-icon-database,.sc-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em !important;stroke-width:0;stroke:currentColor;fill:currentColor;}label.sc-hide-icon svg{opacity:0;}.sc-standalone-var-name{grid-column:1/3;}.sc-standalone-var-name span{padding-left:25px;padding-right:10px;}.sc-table{border-collapse:collapse;}.sc-title{font-weight:bold;font-size:1.5em;}.sc-subtitle{font-weight:normal;font-style:italic;text-align:left;font-size:1.2em;padding:1px;}.sc-table th,.sc-table td{border:1px solid var(--sc-inverse-background-color0);padding:0 5px 0 5px;}.sc-table th{text-align:center;}.sc-table tr{background-color:var(--sc-background-color1);text-align:right;}.sc-table tr:hover{background-color:var(--sc-background-color2);}.sc-table th.sc-data{background-color:var(--sc-table-data-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-coords{background-color:var(--sc-table-coords-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-masks{background-color:var(--sc-table-masks-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-attrs{background-color:var(--sc-table-attrs-color);color:var(--sc-table-header-font-color);}.sc-table th.sc-subheader{background-color:var(--sc-background-color2);}.sc-table td.sc-padding{background-color:var(--sc-background-color1);border:0 solid var(--sc-background-color1);height:1.2em;}.sc-label{fill:var(--sc-font-color0,#444444);text-anchor:middle;}.sc-name{fill:var(--sc-font-color0,#111111);}.sc-inset-line{stroke:var(--sc-font-color1);stroke-width:0.05;stroke-dasharray:0.2,0.2;}.sc-log-wrap{height:25ex;resize:vertical;overflow-y:scroll;display:flex;flex-direction:column-reverse;border:1px solid;border-color:var(--jp-border-color2);background-color:var(--sc-background-color1);}div.sc-log{line-height:2.5ex;}table.sc-log{table-layout:auto;border-collapse:collapse;}tr.sc-log:nth-child(even){background-color:var(--sc-background-color0);}tr.sc-log > td{vertical-align:top;padding-bottom:0.5ex;}.sc-log-time-stamp{min-width:22ch;font-family:var(--jp-code-font-family);color:var(--sc-font-color2);}.sc-log-level{min-width:10ch;}tr.sc-log-debug td.sc-log-level{color:var(--jp-accent-color1);}tr.sc-log-info td.sc-log-level{color:var(--jp-info-color1);}tr.sc-log-warning td.sc-log-level{color:var(--jp-warn-color1);}tr.sc-log-error td.sc-log-level{font-weight:bold;color:var(--jp-error-color2);}tr.sc-log-critical td.sc-log-level{font-weight:bold;color:var(--sc-background-color0);background-color:var(--jp-error-color1);}.sc-log-message{white-space:pre-wrap;width:100%;}.sc-log-html-payload{white-space:normal;}.sc-log-name{padding-right:0.5em;text-align:right;white-space:pre-wrap;color:var(--sc-font-color3);}</style>"}}, "7eb3ede14f2e4004adfc9f24d646de16": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": null, "border_left": null, "border_right": null, "border_top": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "973858047d3d4a16bd4dc3cbe2dee8db": {"model_name": "VBoxModel", "model_module": "@jupyter-widgets/controls", "model_module_version": "2.0.0", "state": {"_dom_classes": ["sc-log-wrap"], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "2.0.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "2.0.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_2017c312c2964b0eb5ab8c581943be68", "IPY_MODEL_2d582256f7b34ee88d53d8c503bf5777"], "layout": "IPY_MODEL_7eb3ede14f2e4004adfc9f24d646de16", "tabbable": null, "tooltip": null}}}, "version_major": 2, "version_minor": 0}
</script></section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="sans.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">SANS</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="reference.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Reference</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Scipp contributors<br/>
  
      &copy; Copyright 2023 Scipp contributors.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>


  </body>
</html>